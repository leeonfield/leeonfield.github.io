<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Leeon Notes</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://lijundong.com/"/>
  <updated>2017-07-06T10:07:43.000Z</updated>
  <id>http://lijundong.com/</id>
  
  <author>
    <name>leeon</name>
    <email>leeonfield@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>用户体验之 localStorage</title>
    <link href="http://lijundong.com/improve-UE-by-localStorage/"/>
    <id>http://lijundong.com/improve-UE-by-localStorage/</id>
    <published>2017-07-05T12:10:38.000Z</published>
    <updated>2017-07-06T10:07:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>通过在页面应用使用 localStorage 提升用户使用体验。 </p>
<a id="more"></a>
<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>首先，来说两个关于用户体验的经历。<br>大学在校期间，经常被安排在教学系统上填写各种信息采集表，教学系统是学校找外面外包公司做的，给的钱多，出的活却很烂，信息采集的表单是很老旧的 table 布局，一页一个表单，一个表单有几十个项，当你辛辛苦苦填完了整个表单，点击提交按钮页面却没有响应，系统卡了？你抱着试一试的心态刷新了页面，恭喜你，之前填的数据全部丢失，像是卷入了一个黑洞，你又从第一项开始填。这样的系统毫无用户体验可言，不是强制要求，没人愿意打开这样的网站。<br>到了大三找实习，投简历到阿里，需要在系统上填一些信息，对应的也是一个表单很多项，巧的是，提交时页面卡住了，虽然脑海中重现了被学校系统支配的恐惧，但除了刷新页面别无选择，刷新之后，页面回来了，之前填写的数据竟然原封不动的回来了，当时很菜，不知道是怎么实现，就觉得背后的技术肯定很厉害，后面才去了解这方面的知识。<br>后来了解了 localStorage 之后，才意识到表单数据保存背后的技术很简单，但是用在了相应的场景，给用户带来的是非常棒的用户体验，从那之后，我对阿里校招页面一直很有好感。</p>
<h3 id="关于-localStorage"><a href="#关于-localStorage" class="headerlink" title="关于 localStorage"></a>关于 localStorage</h3><h4 id="容量"><a href="#容量" class="headerlink" title="容量"></a>容量</h4><p>localStorage 的容量是相对其作用域而言，而 localStorage 的作用域是 <code>协议 + 主机名 + 端口</code>，目前业界默认同一作用域下拥有 5M 的容量，手机端和 PC 端标准略有不同。<br>数据以键值对方式存储，同一作用域下的数据可以被相互访问，并且不允许跨域。</p>
<h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">localStorage.setItem(<span class="string">"name"</span>,<span class="string">"leeon"</span>);	<span class="comment">//设置 name 值 为 leeon</span></span><br><span class="line">localStorage.getItem(<span class="string">"name"</span>);	<span class="comment">//获取 name 的值</span></span><br><span class="line">localStorage.key(<span class="number">0</span>); 	<span class="comment">//获取第 0 个数据项的 key 名</span></span><br><span class="line">localStorage.removeItem(<span class="string">"name"</span>);	<span class="comment">//移除 name 对应的键值对</span></span><br><span class="line">localStorage.clear();	<span class="comment">//清除当前作用域下的所有localstorage数据</span></span><br></pre></td></tr></table></figure>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><p>上面提到的表单数据保存是最常见的场景，避免信息的丢失，实现方式是在 <code>input</code> 标签 <code>blur</code>（失焦) 后，触发 localStorage 存储，页面加载之后，从 localStorage 读取已存储的数据，表单提交成功后，移除存储的数据。</p>
<p>还有一种情况，类似于博客系统内置的评论功能，页面可以参见下图，这样的场景，没有登陆，用户信息不能持久化保存，每次评论都需要再次填写基础信息<br><img src="http://source.lijundong.com/17-7-6/47641822.jpg" alt=""></p>
<p>应用 localStorage 保存用户基础信息，我用 React 写了一个评论框输入组件，包含的 <code>_saveUsername</code> 和 <code>_loadUsername</code> 方法对应着用户信息的存储以及获取，分别会在输入框失焦以及页面渲染时被调用，体验更好的方式则是提供一个保存基本信息的选项，用户在勾选后，信息被保存。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CommentInput</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">        <span class="keyword">this</span>.state = &#123;</span><br><span class="line">            username: <span class="string">''</span>,</span><br><span class="line">            content: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> PropType = &#123;</span><br><span class="line">        onSubmit: PropType.func</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        <span class="keyword">this</span>.textarea.focus()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillMount() &#123;</span><br><span class="line">        <span class="keyword">this</span>._loadUsername()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _saveUsername (username) &#123;</span><br><span class="line">        localStorage.setItem(<span class="string">'username'</span>, username)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _loadUsername () &#123;</span><br><span class="line">        <span class="keyword">const</span> username = localStorage.getItem(<span class="string">'username'</span>)</span><br><span class="line">        <span class="keyword">if</span>(username) &#123;</span><br><span class="line">            <span class="keyword">this</span>.setState(&#123;username&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleUserNameBlur (event) &#123;</span><br><span class="line">        <span class="keyword">this</span>._saveUsername(event.target.value)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handleUsernameChange (event) &#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            username: event.target.value</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    handleContentChange (event) &#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            content: event.target.value</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    handleSubmit () &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.props.onSubmit) &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;username, content&#125; = <span class="keyword">this</span>.state</span><br><span class="line">            <span class="keyword">this</span>.props.onSubmit(&#123;</span><br><span class="line">                username: <span class="keyword">this</span>.state.username, </span><br><span class="line">                content: <span class="keyword">this</span>.state.content,</span><br><span class="line">                createdTime: +<span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;content: <span class="string">''</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    render () &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"comment-input"</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"comment-field"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">"comment-field-name"</span>&gt;</span>userName:<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"comment-field-input"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span></span><br><span class="line">                        <span class="attr">onBlur</span>=<span class="string">&#123;this.handleUserNameBlur.bind(this)&#125;</span></span><br><span class="line">                        <span class="attr">value</span>=<span class="string">&#123;this.state.username&#125;</span></span><br><span class="line">                        <span class="attr">onChange</span>=<span class="string">&#123;this.handleUsernameChange.bind(this)&#125;</span> /&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"comment-field"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">"comment-field-name"</span>&gt;</span>Comment:<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"comment-field-input"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">textarea</span></span><br><span class="line">                        <span class="attr">ref</span>=<span class="string">&#123;(textarea)</span> =&gt;</span> &#123;this.textarea = textarea&#125;&#125;</span><br><span class="line">                         value=&#123;this.state.content&#125; </span><br><span class="line">                         onChange=&#123;this.handleContentChange.bind(this)&#125;</span><br><span class="line">                        &gt;<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"comment-field-button"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleSubmit.bind(this)&#125;</span> &gt;</span>comment<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="关于用户体验"><a href="#关于用户体验" class="headerlink" title="关于用户体验"></a>关于用户体验</h3><p>因为做的工作的原因，遇到一些很棒的网站第一反应是打开控制台看代码，每每看到那些巧妙的代码都赞叹不已，少量的代码带来用户体验的大幅度提升，这是具有很高性价比的一件事。遇到一些烂糟糟的设计，会考虑烂的原因，以及如何去改进，比如渣浪的微博。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;通过在页面应用使用 localStorage 提升用户使用体验。 &lt;/p&gt;
    
    </summary>
    
      <category term="前端" scheme="http://lijundong.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="UE" scheme="http://lijundong.com/tags/UE/"/>
    
      <category term="localstorage" scheme="http://lijundong.com/tags/localstorage/"/>
    
  </entry>
  
  <entry>
    <title>给生活一个规范</title>
    <link href="http://lijundong.com/normalize-life-with-tools/"/>
    <id>http://lijundong.com/normalize-life-with-tools/</id>
    <published>2017-06-29T12:03:35.000Z</published>
    <updated>2017-06-29T12:06:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>生活中的高频问题都应有一个相对最优解，如果没有，你应该有一个。</p>
<a id="more"></a>
<p>生活中有很多易用并能极大提高效率的工具，借助这些工具，可以让过程事半功倍，我喜欢搜寻可以解决生活痛点的工具，搜寻到的工具，有些成了生活工作必不可缺的一部分，有些，则只是好工具，我并没有高频使用，主要原因是因为在生活与工作时，没能形成一个体系，没有一个成型的规则。</p>
<p>做事没有规则的结果，就是在多次处理同一问题时，可能会选择多种解决方式，每次选了新的解决方式都可能会出现新的问题，无形中增加了处理成本，再者，每次解决问题后，都会获得已知的相对最优解，再次遇到相同问题时，抛弃最优解的处理方式无疑是对之前投入成本的浪费，长此以往，就陷入了高投入低产出的低效局面。</p>
<p>我一直想解决这个问题，试图给遇到的高频问题一个普世方案，在处理问题时高效果断，例如最基本 GTD（get things done），市面上存在的优秀的 GTD 工具已经非常多了，我试过很多款，都是拥有庞大用户基数的工具，体验很棒，然而具体也只是试用而已，我一直没能生成一个 GTD 规范，待处理事项仍旧依靠大脑缓存，处于这样的状态，一是我待处理的事物数量不大，大脑可以应付，这种状态的改变不是必须，二是我没有提高效率的意识。这样的状态虽然很少出错，但是有弊端，我需要通过高频率的回忆来加深记忆，这样回忆的过程可能发生在任何时候，在我工作之余放松的时候，在我专注思考问题的时候，这个提醒会突然蹦出来打断我，这种隐形成本的消耗是巨大的。另一个例子是关于写博客，我用 sublime 或者 vim（比如这篇）编写 markdown，通过 hexo 将生成的文件推到服务器，偶尔一篇文章会在多个平台发布，我需要在每个站点贴一遍，中间消耗的成本可以看得见。还有一个例子，我这个人不善交际，情商很低，在大街上遇到同一个人（认识但不熟），我可能一次会选择热情打招呼，另一次，选择装作没看见，是不是很奇葩？我自己也觉得奇葩，这样的结果就是我与那些人形同陌路。在遇到一些二选一的情况时，我没有一个完整的规则体系，最后的结果往往带来很多苦恼。以上三个问题只是一部分，但已经说明了很多问题。</p>
<p>我今天在用 google calendar 制定日程，未来的一段时间里，它应该会被高频使用，iOS 原生的提醒也开始用，需要查看待处理事项时，大脑告诉我打开工具去看，不需要高频率的让大脑高频 check 事项。生活中还有很多低效的地方，我意识到的以及没能意识到的，都待被改进。</p>
<p>两年前开始折腾 shadowsocks，之后开始用 Chrome 和 Google 账户，从那之后就很少使用国内的搜索引擎，我的设备上再也没出现国内的浏览器，这就是我的规则，这些工具和模式已经成为默认选项，一个稳态，即便环境变化，经过调整后，又进入另一个稳态，这就是我想达到的效果。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;生活中的高频问题都应有一个相对最优解，如果没有，你应该有一个。&lt;/p&gt;
    
    </summary>
    
      <category term="life" scheme="http://lijundong.com/categories/life/"/>
    
    
      <category term="life" scheme="http://lijundong.com/tags/life/"/>
    
      <category term="规范" scheme="http://lijundong.com/tags/%E8%A7%84%E8%8C%83/"/>
    
  </entry>
  
  <entry>
    <title>Chrome 下合并不同 Google 账号数据</title>
    <link href="http://lijundong.com/synchronize-data-between-google-accounts/"/>
    <id>http://lijundong.com/synchronize-data-between-google-accounts/</id>
    <published>2017-03-16T10:34:11.000Z</published>
    <updated>2017-03-17T02:00:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>如果你在 Chrome 上同时拥有了两个 Google 账号，并深受其扰，开始想着合并两个账户的数据到某一个账户，我想告诉你，这真的远比想象的简单。</p>
<a id="more"></a>
<p>在今天之前一直使用的是两个 google 账号，主要的数据在于 Chrome 上存储的扩展、书签以及密码，新号用于邮件管理，两个账号的使用随着时间的延续会让事情变得复杂，之前没找到合适的方式，今天在官方的帮助文档里找到了解决方案：</p>
<blockquote>
<ol>
<li>打开 Chrome。</li>
<li>点击右上角的“更多”图标 更多。</li>
<li>点击设置。</li>
<li>在“登录”下方，点击取消与您的 Google 帐户的关联。</li>
<li>点击断开帐户连接。</li>
<li><strong>提示是否保留数据，选择保留</strong></li>
<li>点击登录 Chrome。</li>
<li>使用新账户进行登陆</li>
<li><strong>提示是否同步数据，选择同步</strong></li>
</ol>
</blockquote>
<p>Alphabet 的产品才是真的感动人心。</p>
<p>来源：<a href="https://support.google.com/chrome/answer/6386684?hl=zh-Hans" target="_blank" rel="external">在 Chrome 中切换同步帐户</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;如果你在 Chrome 上同时拥有了两个 Google 账号，并深受其扰，开始想着合并两个账户的数据到某一个账户，我想告诉你，这真的远比想象的简单。&lt;/p&gt;
    
    </summary>
    
      <category term="工具使用" scheme="http://lijundong.com/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="google" scheme="http://lijundong.com/tags/google/"/>
    
      <category term="数据" scheme="http://lijundong.com/tags/%E6%95%B0%E6%8D%AE/"/>
    
  </entry>
  
  <entry>
    <title>Javascript 的赋值、引用以及深拷贝、浅拷贝</title>
    <link href="http://lijundong.com/deep-clone-vs-shallow-clone/"/>
    <id>http://lijundong.com/deep-clone-vs-shallow-clone/</id>
    <published>2017-02-27T13:04:43.000Z</published>
    <updated>2017-02-28T16:58:55.000Z</updated>
    
    <content type="html"><![CDATA[<p>在之前总结 <a href="http://www.lijundong.com/this-in-javascript/" target="_blank" rel="external">This 用法</a> 的时候,遇到了传参问题，由此意识到了复制与引用的问题，说得高端些，引申出了深拷贝与浅拷贝的问题，后来在链家面试的时候，和一面也讨论到这个问题，当时的理解比较乱，涉及到深拷贝实现的方面都不熟悉，现在试着总结一下。</p>
<a id="more"></a>
<h3 id="基本类型-amp-引用类型"><a href="#基本类型-amp-引用类型" class="headerlink" title="基本类型 &amp; 引用类型"></a>基本类型 &amp; 引用类型</h3><p>ECMAScript 中的变量类型分为两类</p>
<ul>
<li>基本类型：number、string、boolean、null、undefined</li>
<li>引用类型：Object</li>
</ul>
<p>两者的区别就是这篇文章要讨论的赋值问题，首先复习一下两种变量类型的存储方式。</p>
<h4 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h4><p>基本类型变量的存储方式如下图所示，栈内存中分别存储着变量的标识符以及变量的值。</p>
<p><img src="http://source.lijundong.com/17-2-28/11497418-file_1488289350451_141ba.png" alt=""></p>
<p>所以 <code>var a = &#39;leeon&#39;;</code> 这里的 a 就是以下面的的方式进行存储。</p>
<p><img src="http://source.lijundong.com/17-2-28/17191622-file_1488289392814_648.png" alt=""></p>
<h4 id="引用类型"><a href="#引用类型" class="headerlink" title="引用类型"></a>引用类型</h4><p>至于引用类型变量，参看下图，可以对比上面基本类型变量的存储结构。</p>
<p><img src="http://source.lijundong.com/17-2-28/579494-file_1488289373542_128ea.png" alt=""></p>
<p>引用类型变量与基本类型变量的区别是，栈内存存储的是变量的标识符以及对象在堆中的存储地址。可能听起来拗口，例如 <code>var obj1 = {name: &#39;leeon&#39;};</code> 这样的对象定义之后，就会以下图的方式进行存储。</p>
<p><img src="http://source.lijundong.com/17-2-28/28695556-file_1488289419385_10e6a.png" alt=""></p>
<p>存储结构的差异只是前提，下面的代码才到重点</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 情境一</span></span><br><span class="line"><span class="comment">// 基本类型变量</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'leeon'</span>;  <span class="comment">//leeon</span></span><br><span class="line"><span class="keyword">var</span> b = a;       </span><br><span class="line"><span class="built_in">console</span>.log(b);  <span class="comment">//leeon</span></span><br><span class="line">b = <span class="string">'pine'</span>;      <span class="comment">// pine</span></span><br><span class="line"><span class="built_in">console</span>.log(a);  <span class="comment">//leeon</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这段代码很简单，改变 b 并不会影响到 a</span></span><br><span class="line"><span class="comment">// 下面这段就不同了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//情境二</span></span><br><span class="line"><span class="comment">//引用类型变量</span></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;name: <span class="string">'leeon'</span>&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = obj1;</span><br><span class="line"><span class="built_in">console</span>.log(obj2);  <span class="comment">// &#123;name: 'leeon'&#125;</span></span><br><span class="line">obj2.name = <span class="string">'pine'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj1);  <span class="comment">// &#123;name: 'pine'&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// obj2 是 obj1 的副本，但修改 obj2 却影响了 obj1 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 情境三</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;name: <span class="string">'leeon'</span>&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = obj1;</span><br><span class="line"><span class="built_in">console</span>.log(obj2);  <span class="comment">// &#123;name: 'leeon'&#125;</span></span><br><span class="line">obj2 = &#123;name: <span class="string">'pine'</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj1);  <span class="comment">// &#123;name: 'leeon'&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// obj2 是 obj1 的副本，但修改 obj2 没有影响了</span></span><br></pre></td></tr></table></figure>
<p>这样的问题最初遇到时觉得很费解，但是从内存角度进行理解之后，答案开始清晰，情境一中，基本类型变量的拷贝，复制了变量的标识符以及值，<code>a</code> 与 <code>b</code> 的关系保持了独立。</p>
<p><img src="http://source.lijundong.com/17-2-28/62092344-file_1488289444123_a40c.png" alt=""></p>
<p>而在情境二中，在引用类型变量这里，拷贝时复制的是变量的标识符与 <strong>对象存储地址</strong>，导致最后 <code>obj1</code> 和 <code>obj2</code> 都指向同一个对象，<code>obj2</code> 和 <code>obj1</code> 只是同一对象的两个面具，相互影响自然是必然的结果。 </p>
<p><img src="http://source.lijundong.com/17-3-1/23876944-file_1488298747142_8a89.png" alt=""></p>
<p>但是情境三中，对 <code>obj2</code> 的更改却没影响到 <code>obj1</code>，这又是为什么？难道上面的理论有问题？当然不是，给 <code>obj2</code> 赋值一个新的对象，背后做的其实是将 <code>obj2</code> 的对象地址指向 <code>{name: &#39;pine&#39;}</code>，并不会影响到原对象，原理如下 ：<br><img src="http://source.lijundong.com/17-3-1/33543805-file_1488298796532_150c9.png" alt=""></p>
<p>这样的拷贝方式就引发了一个问题，我本想拷贝一个新的完全独立的新对象，最后只得出来一个壳，这是无法接受的（感受到了敷衍……）。这里就引出了深拷贝与浅拷贝之说（人们总喜欢造一堆高大上的概念）。</p>
<h3 id="深拷贝-amp-浅拷贝"><a href="#深拷贝-amp-浅拷贝" class="headerlink" title="深拷贝 &amp; 浅拷贝"></a>深拷贝 &amp; 浅拷贝</h3><p>由此可以明白，所谓浅拷贝，指的是仅拷贝对象地址，拷贝后的副本与原对象仍共用一块内存，而深拷贝则是将对象进行内存级别的复制，拷贝的副本与原对象保持独立。</p>
<h3 id="如何实现深拷贝"><a href="#如何实现深拷贝" class="headerlink" title="如何实现深拷贝"></a>如何实现深拷贝</h3><h4 id="JSON-parse"><a href="#JSON-parse" class="headerlink" title="JSON.parse()"></a>JSON.parse()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> oobj1 = &#123;name: <span class="string">'leeon'</span>,friens: &#123;name:[<span class="string">'john'</span>,<span class="string">'kk'</span>,<span class="string">'jd'</span>]&#125;&#125;;</span><br><span class="line">temp = <span class="built_in">JSON</span>.stringify(obj1);</span><br><span class="line"><span class="keyword">var</span> obj2 = <span class="built_in">JSON</span>.parse(temp);</span><br><span class="line"><span class="comment">// p 是 o 的深拷贝</span></span><br></pre></td></tr></table></figure>
<h4 id="slice"><a href="#slice" class="headerlink" title="slice()"></a>slice()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1=[<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>];</span><br><span class="line"><span class="keyword">var</span> arr2=arr1.slice(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// arr2 是 arr1 的深拷贝</span></span><br></pre></td></tr></table></figure>
<h4 id="concat"><a href="#concat" class="headerlink" title="concat()"></a>concat()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1=[<span class="string">"1"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = arr1.concat();</span><br><span class="line"><span class="comment">// arr2 是 arr1 的深拷贝</span></span><br></pre></td></tr></table></figure>
<h4 id="jQuery-的-extend"><a href="#jQuery-的-extend" class="headerlink" title="jQuery 的 extend()"></a>jQuery 的 extend()</h4><p><em>参考：</em></p>
<ul>
<li>(美)David Flanagan. JavaScript权威指南（原书第6版） (Kindle 位置 3112-3125).</li>
<li><a href="http://www.cnblogs.com/tracylin/p/5346314.html" target="_blank" rel="external">也来谈一谈js的浅复制和深复制</a></li>
<li>​<a href="http://bosn.me/js/js-call-by-sharing/" target="_blank" rel="external">JS是按值传递还是按引用传递?</a></li>
<li><a href="https://segmentfault.com/a/1190000002789651" target="_blank" rel="external">JS 进阶基本类型 引用类型 简单赋值 对象引用</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在之前总结 &lt;a href=&quot;http://www.lijundong.com/this-in-javascript/&quot;&gt;This 用法&lt;/a&gt; 的时候,遇到了传参问题，由此意识到了复制与引用的问题，说得高端些，引申出了深拷贝与浅拷贝的问题，后来在链家面试的时候，和一面也讨论到这个问题，当时的理解比较乱，涉及到深拷贝实现的方面都不熟悉，现在试着总结一下。&lt;/p&gt;
    
    </summary>
    
      <category term="javascript" scheme="http://lijundong.com/categories/javascript/"/>
    
    
      <category term="javascript" scheme="http://lijundong.com/tags/javascript/"/>
    
      <category term="深拷贝" scheme="http://lijundong.com/tags/%E6%B7%B1%E6%8B%B7%E8%B4%9D/"/>
    
      <category term="浅拷贝" scheme="http://lijundong.com/tags/%E6%B5%85%E6%8B%B7%E8%B4%9D/"/>
    
  </entry>
  
  <entry>
    <title>早班车乱谈</title>
    <link href="http://lijundong.com/think-in-early-bus/"/>
    <id>http://lijundong.com/think-in-early-bus/</id>
    <published>2017-02-17T01:34:10.000Z</published>
    <updated>2017-06-26T12:59:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>我们处在一个巨大的变革之中。</p>
<a id="more"></a>
<p>最近在看 「天才在左，疯子在右」，没看之前一直以为是描述疯狂的天才，看了才知道是一本精神病患者访谈录，每篇文章，作者记录和一位患者的交流过程，书中每一个病例，没有病因，没有结论，作者只是在记录这些奇怪的病例以及现象。这让我想起了初中看的「故事会」里面描述的鬼怪之说，所以书中内容我已经不关心，继续看是因为某些患者的想法十分有趣，每看完一篇，我甚至都会想好一会，我可能是下一位患者。</p>
<p>这就是早班车乱谈的来由，坐上公司的班车，我开始胡思乱想。</p>
<p>老司机！开车啊</p>
<p>现在看来，「Matrix」真是一部具有超时代意义的电影，十年前看的时候，我只单纯地把它作为科幻电影对待，但如今再看，愈发觉得这会是个预言，科技的发展不断把我们向前推，那个 matrix 世界的轮廓也愈加的明显。</p>
<p>谁也无法保证我们不是生活在一个 matrix 世界里，活着的感觉也许只是脑电波的闪动，我们连躯体都不需要，只需要思考的脑体，连上主机。那么，存在的意义在哪 ？</p>
<p>VR 的技术日臻成熟，不消几年，VR 会和智能手机一样普及，VR 欺骗了我们的眼睛，那么，VR 之后呢？直接欺骗我们的神经系统如何 ？技术足够成熟，给大脑接一根数据线，我们获得了与现实一样的感受，在那里，你长得帅，娶了一位漂亮的姑娘，生活没有烦恼，没有顾虑，你还愿意回来吗？那些生活痛苦的人，现实生活不如意的人，选择了把自己托管到主机上，只需要低成本就可以开始一段多彩缤纷的生活。最后的结果会不会是 matrix ？</p>
<p>我们坐上了一趟停不下来的火车，不知道下一个隧道之后是美景还是深渊。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我们处在一个巨大的变革之中。&lt;/p&gt;
    
    </summary>
    
      <category term="随笔" scheme="http://lijundong.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="matrix" scheme="http://lijundong.com/tags/matrix/"/>
    
      <category term="早班车" scheme="http://lijundong.com/tags/%E6%97%A9%E7%8F%AD%E8%BD%A6/"/>
    
  </entry>
  
  <entry>
    <title>Mac 备份方案</title>
    <link href="http://lijundong.com/backup-in-mac/"/>
    <id>http://lijundong.com/backup-in-mac/</id>
    <published>2017-02-14T09:23:36.000Z</published>
    <updated>2017-02-14T06:54:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>行走江湖，讲求的是一个稳字。</p>
<a id="more"></a>
<p>在狗东买的硬盘下午到了，折腾了下，格式化、分区、备份。这里记录下我的方案。</p>
<h3 id="关于硬盘"><a href="#关于硬盘" class="headerlink" title="关于硬盘"></a>关于硬盘</h3><p>硬盘、耳机一类带有玄学色彩的电子产品，我选购的经验是预算之内跟着群众走，排除你有情怀或者是行家里手的情况。作为普通消费者，我们的需求也很简单，因此不必考虑那些极端环境,只要不犯错就达到我们的基本诉求了，毕竟群众的眼睛是雪亮的。<br>所以，我买了希捷的 <a href="http://detail.zol.com.cn/move_disk/index364131.shtml" target="_blank" rel="external">Backup-Plus-Slim-1TB(STDR1000300)</a>。</p>
<p>我是跟着群众走的，所以不要问我为什么……</p>
<h3 id="关于用途"><a href="#关于用途" class="headerlink" title="关于用途"></a>关于用途</h3><p>我买的容量是 1T，计划分区出 250G 作为 timeMachine 的备份空间 A，剩下的用做日常文件存储 B。</p>
<h3 id="关于文件格式"><a href="#关于文件格式" class="headerlink" title="关于文件格式"></a>关于文件格式</h3><p>先抛出结论，硬盘分为两个区，250G 备份分区 A 格式化为 <code>Mac OS Extended</code> 格式，另一分区 B 格式化为 <code>exfat</code> 格式，将硬盘转插在 windows 上，将 B 分区格式化为 <code>NTFS</code> 文件格式。</p>
<p>为适配 Windows，故将大分区 B 设置成 <code>NTFS</code> 格式，<code>NTFS</code> 在 Mac 下可读不可写，但是希捷官方提供了适用于 MacOS(10.9. 及以上)的 <a href="http://www.seagate.com/cn/zh/support/downloads/item/ntfs-driver-for-mac-os-master-dl/" target="_blank" rel="external">Paragon</a>，所以唯一的问题也被解决了。</p>
<h3 id="timeMachine"><a href="#timeMachine" class="headerlink" title="timeMachine"></a>timeMachine</h3><p>关于 timeMachine 的使用，极其简单，打开 timeMachine，选择备份盘，备份。</p>
<p><strong>建议每次升级之前先备份一次。</strong></p>
<h3 id="关于恢复"><a href="#关于恢复" class="headerlink" title="关于恢复"></a>关于恢复</h3><p>目前我还没用到恢复，希望永远也用不到，哈哈。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;行走江湖，讲求的是一个稳字。&lt;/p&gt;
    
    </summary>
    
      <category term="工具使用" scheme="http://lijundong.com/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="备份" scheme="http://lijundong.com/tags/%E5%A4%87%E4%BB%BD/"/>
    
      <category term="timemachine" scheme="http://lijundong.com/tags/timemachine/"/>
    
      <category term="mac" scheme="http://lijundong.com/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>Javascript 中 this 的指向</title>
    <link href="http://lijundong.com/this-in-javascript/"/>
    <id>http://lijundong.com/this-in-javascript/</id>
    <published>2017-02-13T11:11:50.000Z</published>
    <updated>2017-02-13T18:19:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>关于 javascript 中 this 用法的笔记，来自 <a href="https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/ch1.md" target="_blank" rel="external">You Don’t Know JS: this &amp; Object Prototypes</a> 的读书笔记。内容包括 this 绑定规则的总结，以及遇到具体问题时，判断 this 指向的方法。</p>
<a id="more"></a>
<p>首先了解下 this 的绑定规则，分别是 <code>默认绑定</code>、<code>显式绑定</code>、<code>隐式绑定</code>、<code>new 绑定</code>，说是绑定规则，我的理解是四种应用场景，不同的应用场景对应着不同的指向。</p>
<h3 id="指向规则"><a href="#指向规则" class="headerlink" title="指向规则"></a>指向规则</h3><h4 id="默认绑定"><a href="#默认绑定" class="headerlink" title="默认绑定"></a>默认绑定</h4><p>默认绑定的方式很常见，举个例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line">fun(); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>在默认绑定规则下，<strong>this 被绑定到了全局对象</strong>，所以例子中输出的 <code>this.a</code> 的值即全局变量 <code>a</code> 的值。</p>
<p>需要注意的是，绑定到全局对象只存在于非严格模式下，当使用严格模式时，<strong>this 会被绑定到 undefined</strong>。参见下面的案例。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log( <span class="keyword">this</span>.a );</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>;</span><br><span class="line">fun(); <span class="comment">// this is undefined</span></span><br></pre></td></tr></table></figure>
<h4 id="隐式绑定"><a href="#隐式绑定" class="headerlink" title="隐式绑定"></a>隐式绑定</h4><p>相比于默认绑定只有两个选项，隐式绑定就含蓄的多，我们需要分析上下文来弄清 this 的指向。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  foo: fun</span><br><span class="line">&#125;;</span><br><span class="line">obj.foo();  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>foo 作为引用属性被调用，虽然 foo 不属于 obj 对象，但在被调用时，foo 落脚于 obj 对象，<strong>隐式绑定将 this 绑定到此时的上下文对象</strong>，所以 此时的 <code>this.a</code> 和 <code>obj.a</code> 是一样的。</p>
<p>这一个例子还不能完全将隐式绑定解释清晰，为此，我们需要更多的例子,下面我们来讨论下引用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  foo: fun</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">  obj: obj1</span><br><span class="line">&#125;;</span><br><span class="line">obj1.foo(); <span class="comment">//1</span></span><br><span class="line">obj2.obj.foo(); <span class="comment">//1</span></span><br></pre></td></tr></table></figure>
<p>如果遇到这样的引用链，稍加分析不难理解，对象属性引用链中只有最顶层或者说最后一层会影响 this 的上下文，换而言之，在分析引用链中的 this 指向，只需要分析最后一层即可。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  foo: fun</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> bar = obj.foo;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'global'</span>;</span><br><span class="line">bar(); <span class="comment">//global</span></span><br></pre></td></tr></table></figure>
<p>在这段代码中，<code>bar</code> 引用 <code>obj.foo</code>，<code>obj.foo</code> 引用 <code>fun</code>，归根结底，<code>bar</code> 引用的还是 <code>fun</code>，最后在调用时，和 <code>obj</code> 并没有关系，这只是开始，下面继续。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doDoo</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  fn();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  foo: fun</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'global'</span>;</span><br><span class="line">doFoo(obj.foo); <span class="comment">// global</span></span><br></pre></td></tr></table></figure>
<p>这段代码中的参数传递其实就是一种隐式传值，看到这里有没有觉得似曾相识，跟上一段代码异曲同工，表面上调用的是 <code>obj.foo</code> 其实与 <code>obj</code> 并无联系。<code>doFoo()</code> 中执行的 <code>foo()</code> 调用的是 <code>fun()</code>。趁热打铁，再来一个例子。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  foo: fun</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'global'</span>;</span><br><span class="line">setTimeout(obj.foo, <span class="number">1000</span>); <span class="comment">// global</span></span><br></pre></td></tr></table></figure>
<p>这段代码和上一段并无二致，只不过这种情形在开发中经常会遇到，this 丢失问题，有没有好办法，肯定有，往下看。</p>
<h4 id="显式绑定"><a href="#显式绑定" class="headerlink" title="显式绑定"></a>显式绑定</h4><p>显式绑定通过 <code>call(…)</code>、<code>apply(…)</code> 方法强制绑定 this</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  foo: fun</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;</span><br><span class="line">  a: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line">obj1.foo(); <span class="comment">//1</span></span><br><span class="line">obj1.foo.call(obj2); <span class="comment">//2</span></span><br></pre></td></tr></table></figure>
<p><code>call(…)</code> 方法将本来指向 <code>obj1</code> 上下文对象的 this 绑定到了 <code>obj2</code>，光明正大的挖墙脚……</p>
<p>为了解决之前的 this 丢失问题，在显式绑定的基础上升级出了<strong>硬绑定</strong>，此招一出，墙脚硬到磕坏牙，再也不用担心 this 会丢失了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  fun.call(obj);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'global'</span>;</span><br><span class="line">bar();  <span class="comment">// 2</span></span><br><span class="line">setTime(bar, <span class="number">1000</span>);  <span class="comment">//2</span></span><br><span class="line">bar.call(<span class="built_in">window</span>);  <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>
<p>看到没，稳如泰山。硬绑定在 ES5 之后有了现成可用的方法 <code>Function.prototype.bind</code>，其中一种应用场景如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">something</span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log( <span class="keyword">this</span>.a, something ); </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.a + something;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; </span><br><span class="line">  a:<span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> bar = fun.bind( obj );   </span><br><span class="line"><span class="keyword">var</span> b = bar( <span class="number">3</span> );  <span class="comment">// 2 3</span></span><br><span class="line"><span class="built_in">console</span>.log( b ); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<h4 id="new-绑定"><a href="#new-绑定" class="headerlink" title="new 绑定"></a>new 绑定</h4><p>考虑下面的代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.a = a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> fun(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(bar.a); <span class="comment">//2</span></span><br></pre></td></tr></table></figure>
<p>使用 new 来调用 <code>fun(..)</code> 时，会构造一个新对象并把它绑定到 <code>fun(..)</code> 调用中的 this<br>上。new 是最后一种可以影响函数调用时 this 绑定行为的方法，我们称之为 new 绑定。</p>
<p>New 绑定也是四种绑定中优先级最高的一种，连硬绑定也能掰弯</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.a = a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> bar = fun.bind(obj);</span><br><span class="line">bar(<span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj.a);  <span class="comment">//  2</span></span><br><span class="line"><span class="keyword">var</span> baz = <span class="keyword">new</span> bar(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj.a);  <span class="comment">//  2</span></span><br><span class="line"><span class="built_in">console</span>.log(baz.a);  <span class="comment">//  3</span></span><br></pre></td></tr></table></figure>
<p>在 new 对象时，预期 <code>obj.a</code> 值应该赋为 3，结果并没有修改，而是 new 出来一个新的对象，说明在 new 的过程中，this 的指向改变了。</p>
<h3 id="判断方法"><a href="#判断方法" class="headerlink" title="判断方法"></a>判断方法</h3><h4 id="常规"><a href="#常规" class="headerlink" title="常规"></a>常规</h4><p>四种规则优先级先后顺序为： <code>new 绑定 &gt; 显式绑定 &gt;  隐式绑定 &gt; 默认绑定</code>。</p>
<p>根据优先级来判断函数在某个调用位置应用的是哪条规则。可以按照下面的顺序来进行判断:</p>
<ol>
<li><p>函数是否在new中调用 ? 如果是的话this绑定的是新创建的对象。</p>
<p><code>var bar = new fun();</code></p>
</li>
<li><p>函数是否通过call、apply或者硬绑定调用 ? 如果是的话，this绑定的是 指定的对象。<br>  <code>var bar = fun.call(obj);</code></p>
</li>
<li><p>函数是否在某个上下文对象中调用 ? 如果是的话，this 绑定的是那个上 下文对象。<br> <code>var bar = obj.foo();</code></p>
</li>
<li><p>如果都不是的话，使用默认绑定。如果在严格模式下，就绑定到undefined，否则绑定到 全局对象。<br> <code>var bar = fun();</code></p>
</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;关于 javascript 中 this 用法的笔记，来自 &lt;a href=&quot;https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/ch1.md&quot;&gt;You Don’t Know JS: this &amp;amp; Object Prototypes&lt;/a&gt; 的读书笔记。内容包括 this 绑定规则的总结，以及遇到具体问题时，判断 this 指向的方法。&lt;/p&gt;
    
    </summary>
    
      <category term="前端" scheme="http://lijundong.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="javascript" scheme="http://lijundong.com/tags/javascript/"/>
    
      <category term="this" scheme="http://lijundong.com/tags/this/"/>
    
  </entry>
  
  <entry>
    <title>关于学习的反思</title>
    <link href="http://lijundong.com/think-about-learning/"/>
    <id>http://lijundong.com/think-about-learning/</id>
    <published>2017-02-10T07:48:11.000Z</published>
    <updated>2017-02-12T06:38:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>请告诉我，你的想法 ？</p>
<a id="more"></a>
<p>年初到现在看了几本书，从原理层面重新理解很多知识点，效果胜过之前看过的任何一篇 Blog。有所感，初拟的题目是「关于技术学习的思考」，后觉不妥，这样的反思不应止于技术。</p>
<p>进入大学之前，所有人都告诉我“你该考个好大学”，包括我自己，但是没人给出理由，同样包括我自己，我年复一年的准备就是为了那场考试，通过考试，进了大学，但从那之后，之前鼓励我考大学的人再没告诉我下一步该怎么走，如果你去问他们，他们不奢望你拿奖学金，但可能会鼓励你去考研，不可否认，“努力学习，拿高绩点，考研去一个更好的学校”，就是我进大学时对于四年的“规划”，美其名曰“规划”，我并不知道考研时为了什么，也不知道考研之后的日子该做什么，没课的时间就去图书馆自习做题，准时睡觉起床，偶尔去跑步，我只是换了一个环境继续着高中的生活，身后被一只无形的手推着走，终日处于一种被动无意识状态。</p>
<p>也许是生活太过枯燥，正好碰到学校的 ACM，于是开始刷题的日子，渐渐乐在其中，听前辈讲题，逛 CSDN，看别人的解题代码，也不求甚解，只浮于看到 Accept 的快感，就这样混了一年。因为选择进入机器人小组，结束了刷题的生活。小组的唯一任务就是准备每年的 Robocon，比赛强迫成员必须尽快的产出，因为对硬件一窍不通，遇到问题总是先去找现成的代码，整日地逛论坛，免费的论坛找不到，就和黄彪凑了 60 大洋买了 amoBBS 的会员，继续找，在网上找单片机视频教程，对着电脑看到昏睡，醒来继续看，仍是不求甚解，因为负责的视觉模块始终无进展，选择退出小组。后来接触 web，跟着 w3cSchool 的教程，又开始了自 high，看了一个月的教程，仍停留在写单页的水平，跟着粉丝日志做 express 开发，跟着 imooc 的视频做微信开发，不求甚解，遇到问题就去找答案，找到能用的答案，能用就行，不求甚解。似乎回到了为了 Accept 整日刷题的状态，我整日都在编码，但技术始终不得精进，终于有一天意识到一个很残酷的事实，我做的只是复制粘贴，一只都是原地踏步，忙碌的只是表象，只是一种主动的无意识状态而已。</p>
<p>我时常在想，一个优秀的工程师，应该像艺术家般，在代码中加入自己的思想，而现在的我仍只是在临摹，距离创作还有遥远的距离，但那是我的追求。BBS、Blog 存在的意义，更偏向经验的传播，在我需要时告诉我 How，但是夜深人静时，艺术家的梦再次扣上心扉，我想去追寻 What 和 Why 时，要探究技术的本质时，还是要去书中寻找。</p>
<p>知识付费在去年开始兴起，以值乎和分答为代表的付费问答，以得到为代表的付费订阅，随后兴起了付费社群。知识付费无疑空前利好创作者，他们可以生活的更好，这也是我希望看到的。不过对于其中的产品，用户还是要有准确的定位。<br>我有过一段时间很喜欢李笑来的观点，包括他的 「把时间当作朋友」，甚至把很多观点奉为圭臬，当时看的时候觉得干货满满，他是我了解的最先做付费社群的人，价格也很贵，崇尚终生学习，并名其新生大学，我一度想过存钱，加入那个社群，后来因为没存到钱（😂），不了了之，偶尔可以看到社群中的文章分享，觉得文风和「时间」一个味道，再读「时间」，不仅没了当初的激动之感，反而感觉到了浓浓的鸡汤风。后来看到他的知乎 live、学费数万元的全栈培训，也就释然了。相比于做比特币投资，我相信他更适合职业割韭菜。</p>
<p>我以技术学习的名义加入过很多技术交流群，结果是接下来的日子，因为群消息太吵我把这些群一个个地屏蔽了，我几乎没在群里说过话，也不怎么看消息，群里面讨论的话题太杂乱，群友水平参差不齐，交流效率奇差。我的初衷是，我会在群里获得技术提升，每个人都是这样的想法，这个群基本就废了，没人愿意输出，或者是有输出的能力。所以在面对一个产品之前，首先应该思考，你在其中的角色是什么？你想得到什么？这一点完全适用于今天的微信社群、小密圈、知乎 live、得到等产品。</p>
<p>知识付费一直存在，我前文提到的 amoBBS 也可以算是付费社群，只是市场环境更好了，产品的形态更多样化，本质不分轩轾，只不过目前的市场，职业割韭菜的人越来越多，这是必经的过程，被收割的群体本着学习的目的前去，交了学费，学了一招防骗术。</p>
<p>交再多的钱，也不可能变得更有思想，这条路上没有捷径。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;请告诉我，你的想法 ？&lt;/p&gt;
    
    </summary>
    
      <category term="随笔" scheme="http://lijundong.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="学习" scheme="http://lijundong.com/tags/%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="web" scheme="http://lijundong.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>Javascript 变量提升原理解析</title>
    <link href="http://lijundong.com/javascript-variable-lift/"/>
    <id>http://lijundong.com/javascript-variable-lift/</id>
    <published>2017-02-07T05:49:49.000Z</published>
    <updated>2017-02-07T07:15:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>很多 Javascript 教程或者书籍中都会介绍 Javascript 的变量提升，但是你了解其中的原因吗？</p>
<a id="more"></a>
<h3 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h3><p>首先来看两个经典的案例 （<strong>案例均处于严格模式</strong>）</p>
<p>案例一：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="keyword">var</span> a;</span><br></pre></td></tr></table></figure></p>
<p>这个很简单，变量提升最直接的体现，输出的结果是 <code>1</code>，实际的执行顺序如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure></p>
<p>案例二：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></p>
<p>这段代码执行会报错，不过错误是 a 是 <code>undefined</code>，而不是 <code>ReferenceError</code>，因为这段代码的实际执行顺序如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line">a = <span class="number">1</span>;</span><br></pre></td></tr></table></figure></p>
<h3 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h3><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p>要弄清楚 Javascript 变量提升，还得回到 Javascript 的编译阶段。</p>
<blockquote>
<p>Part of the compilation phase was to find and associate all declarations with their appropriate scopes.</p>
</blockquote>
<p>编译阶段的其中一个工作就是找到所有的声明，并用合适的作用域将它们关联起来，所有的变量声明以及函数声明都会在代码执行之前首先被处理。所以，分析 Javascript 代码的时候需要先关注声明。<br>这样就导致了 <code>var a = 1;</code> 被分解成了 <code>var a; a = 1;</code>，所以案例二的结果就很明显了。</p>
<h4 id="函数优先"><a href="#函数优先" class="headerlink" title="函数优先"></a>函数优先</h4><p>值得注意的是，变量提升时，<strong>函数声明优先</strong>，函数声明会被首先提升，其次才是变量，具体效果如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">foo();</span><br><span class="line"><span class="keyword">var</span> foo;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br><span class="line">foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>执行的结果是 <code>1</code>，实际执行流程如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//var foo; //重复声明，被忽略</span></span><br><span class="line">foo();</span><br><span class="line">foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>参考：</strong></p>
<ul>
<li><em><a href="https://github.com/getify/You-Dont-Know-JS/blob/master/scope%20%26%20closures/ch4.md" target="_blank" rel="external">You Don’t Know JS: Scope &amp; Closures</a></em></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;很多 Javascript 教程或者书籍中都会介绍 Javascript 的变量提升，但是你了解其中的原因吗？&lt;/p&gt;
    
    </summary>
    
      <category term="javascript" scheme="http://lijundong.com/categories/javascript/"/>
    
    
      <category term="javascript" scheme="http://lijundong.com/tags/javascript/"/>
    
      <category term="scope" scheme="http://lijundong.com/tags/scope/"/>
    
  </entry>
  
  <entry>
    <title>Chrome 插件推荐</title>
    <link href="http://lijundong.com/chrome-extensions-recommend/"/>
    <id>http://lijundong.com/chrome-extensions-recommend/</id>
    <published>2017-02-03T12:52:51.000Z</published>
    <updated>2017-06-26T13:00:25.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天总结一下你可能还不知道的 Chrome 插件，可能会解决你长久以来的痛点，欢迎补充。</p>
<a id="more"></a>
<h3 id="关于-Chrome"><a href="#关于-Chrome" class="headerlink" title="关于 Chrome"></a>关于 Chrome</h3><p>在一次重装系统之后，安装完 Chrome 之后登陆 Google 账号，亲眼见证了扩展挨个恢复，从来没有一个产品给我这样深刻的记忆，那样的感动难以言表。Chrome 会同步所有正在使用的扩展，包括商城里已经下线的扩展！<br>在 <a href="http://www.lijundong.com/SublimeText-extension-recommend/" target="_blank" rel="external">SublimeText 插件推荐</a> 中提过，我喜欢使用生态更完整的产品，不过在云服务时代 Sublime 的插件无法同步，这就比较尴尬了(曾有个插件试图解决这个痛点，后不了了之)。相比于 Sublime，Chrome 是一个更趋于完美的产品。</p>
<p><strong>当然，你还需要解决墙的问题</strong></p>
<h3 id="扩展推荐"><a href="#扩展推荐" class="headerlink" title="扩展推荐"></a>扩展推荐</h3><p>本想给这些插件分类，但是这样似乎会把简单的事情变得复杂，所以，数量不多，按需所取（排名不分先后）。</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei" target="_blank" rel="external">live reload</a></strong><br>应用场景：在你的编辑器中安装 livereload 插件（例如 SublimeText），在编辑文件时预览到 Chrome 中，你的编辑器和 Chrome 即可通讯，达到所见即所得的境界。</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif?utm_source=chrome-app-launcher-info-dialog" target="_blank" rel="external">Proxy SwitchyOmega</a></strong><br>应用场景：轻松管理网络代理，推荐配合 SS 使用。</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/%E4%BA%8C%E7%BB%B4%E7%A0%81qr%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8qr-code-generato/pflgjjogbmmcmfhfcnlohagkablhbpmg" target="_blank" rel="external">二维码(QR码)生成器(QR Code Generator)</a></strong><br>应用场景：为当前页面地址生成二维码。</p>
<p><strong><a href="http://www.editthiscookie.com/" target="_blank" rel="external">EditThisCookie</a></strong><br>应用场景：编辑站点 cookie。</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/ie-tab/hehijbfgiekmjfkfjpbkbammjbdenadd" target="_blank" rel="external">IE Tab</a></strong><br>应用场景：一键模拟 IE 内核，在一些比较特殊的场景下比较使用，不用特意再去打开 IE。</p>
<p><strong><a href="https://wappalyzer.com/?pk_campaign=chrome&amp;pk_kwd=context" target="_blank" rel="external">Wappalyzer</a></strong><br>应用场景：查看当前网站所用技术栈</p>
<p><strong><a href="http://www.alexa.com/" target="_blank" rel="external">Alexa Rank</a></strong><br>应用场景：查看当前站点的全球 Alexa 排名</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/take-webpage-screenshots/mcbpblocgmgfnpjjppndjkmgjaogfceg" target="_blank" rel="external">Take Webpage Screenshots Entirely</a></strong><br>应用场景：功能强大的网页截图，并且提供 Pro 选项，截图可以存储为 PDF 或者 图片。</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/%E6%9E%81%E7%AE%80%E5%9B%BE%E5%BA%8A/heebflcbemenefckkgfnnklbhdbdkagg" target="_blank" rel="external">极简图床</a></strong><br>应用场景：配合七牛账号，轻松上传文件到七牛，管理方便，如果你喜欢使用 Markdown，那么你可以尝试一下。</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/save-to-pocket/niloccemoadcdkdjlinkgdfekeahmflj" target="_blank" rel="external">Save to Pocket</a></strong><br>应用场景：稍后阅读，登录 Pocket 账户，全平台同步，方便快捷。</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/evernote-web-clipper/pioclpoplcdbaefihamjohnefbikjilc" target="_blank" rel="external">Evernote Web Clipper</a></strong><br>应用场景：使用体验和 Pocket 异曲同工，登录印象笔记，全平台同步剪藏。</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/onetab/chphlpgkkbolifaimnlloiipkdnihall" target="_blank" rel="external">OneTab</a></strong><br>应用场景：一键保存并关闭当前窗口的所有 TAB，如果你想关闭当前窗口的所有 TAB，但又想保存下来下次再打开，这无疑是最好的选择，在遇到这个插件之前我都是用书签功能，导致最后留下大量书签。</p>
<p><strong><a href="https://jasonsavard.com/?ref=homepage_url&amp;ext=gmail" target="_blank" rel="external">Checker Plus for Gmail </a></strong><br>应用场景：Gmail 最佳伴侣，登陆 Gmail 账户就可以轻松管理邮件了。</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/gighmmpiobklfepjocnamgkkbiglidom" target="_blank" rel="external">Ad Block</a></strong><br>应用场景：过滤广告，地表最强</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb" target="_blank" rel="external">Vimium</a></strong><br>应用场景：你试过用 Vim 命令操纵 Chrome 吗，你想试试吗</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/momentum/laookkfknpbbblfpciffpaejjkokdgca" target="_blank" rel="external">Momentum</a></strong><br>应用场景：给你一个赏心悦目的 New Tab 界面</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/infinity-new-tab/dbfmnekepjoapopniengjbcpnbljalfg" target="_blank" rel="external">Infinity</a></strong><br>应用场景：有些同学不喜欢 Momentum，说我就喜欢功能丰富的，那么 Infinity 肯定适合你，它会提供你一个功能丰富的 New Tab。</p>
<p><strong><a href="https://chrome.google.com/webstore/detail/stylish-custom-themes-for/fjnbnpbmkenffdnngjfgmeleoegfcffe/related" target="_blank" rel="external">Stylish</a></strong><br>应用场景：此扩展可以让网站应用已有的主题，相信我，他能拯救你的审美疲劳。</p>
<p><strong>Better History</strong>：已下线<br>应用场景：给你更好的浏览历史体验，前段时间开始用的，昨天看却下线了</p>
<p><strong>印象笔记·悦读</strong>：已下线<br>应用场景：将网页内容重新排版，给你更舒适的阅读体验，配合印象笔记使用，体验更佳，不知为何也下线了。</p>
<p><strong>欢迎补充！</strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天总结一下你可能还不知道的 Chrome 插件，可能会解决你长久以来的痛点，欢迎补充。&lt;/p&gt;
    
    </summary>
    
      <category term="工具使用" scheme="http://lijundong.com/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="chrome" scheme="http://lijundong.com/tags/chrome/"/>
    
      <category term="extension" scheme="http://lijundong.com/tags/extension/"/>
    
  </entry>
  
  <entry>
    <title>inline「一」：从 image 底部白边初识 line-height</title>
    <link href="http://lijundong.com/image-and-line-height/"/>
    <id>http://lijundong.com/image-and-line-height/</id>
    <published>2017-01-16T13:25:28.000Z</published>
    <updated>2017-01-17T16:50:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天在做一个静态页面时，图片底部出现一条 3px 高度的白边，既不是 margin 也不是 padding，找了好久没能解决，后来才发现与 line-height 相关，问题解决后查缺补漏。<br>这里作下笔记。</p>
<a id="more"></a>
<p>解决问题之前需要理清楚几个概念，基线、line-height、vertical-align、inline 元素。</p>
<h3 id="基线-baseline"><a href="#基线-baseline" class="headerlink" title="基线(baseline)"></a>基线(baseline)</h3><p>基线(Baseline) 是字体排印学中的概念，指的是多数字母排列的基准线，大多字母都沿着红色基线排列，举个例子辅助理解<br><img src="http://source.lijundong.com/17-1-17/23484364-file_1484619667824_4a0a.png" alt=""><br>图中 xHh 字母的下边缘红线就是基线的所在，那么有没有一个特定的条件来定义基线呢？这里有个概念可供参考</p>
<blockquote>
<p>字母x的下边缘(线)就是基线的所在。</p>
</blockquote>
<p><img src="http://source.lijundong.com/17-1-17/82294663-file_1484620885555_15872.png" alt=""></p>
<p>这里又引出了 <a href="https://en.wikipedia.org/wiki/X-height" target="_blank" rel="external">x-height</a> 的概念，此处不表。</p>
<h3 id="line-height"><a href="#line-height" class="headerlink" title="line-height"></a>line-height</h3><p>关于 line-height 如何定义的讨论，有说法是两条基线之间的距离，看到这个结论我首先想到第一行的行高如何处理，后来去找了资料，发现两条基线之间的距离即是 line-height 这样的结论并不准确。<br>关于 line-height 的定义，<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/line-height" target="_blank" rel="external">MDN</a> 阐述如下：</p>
<blockquote>
<p>On block level elements, the line-height property specifies the minimum height of line boxes within the element.<br>On non-replaced inline elements, line-height specifies the height that is used to calculate line box height.</p>
</blockquote>
<p>即</p>
<blockquote>
<p>block 元素中， line-height 的值等于元素中高度最低的行框(line box) 的高度值。<br>在 non-replaced inline 元素中，line-height 的值等于行框(line box) 的高度值。</p>
</blockquote>
<p><img src="http://source.lijundong.com/17-1-18/72801786-file_1484669613097_12675.png" alt=""></p>
<p><strong>注：</strong></p>
<blockquote>
<p><strong>replaced element VS non-replaced element</strong></p>
<ul>
<li>replaced element: 例如 img、video、canvas 此类渲染出的内容引用外部的元素</li>
<li>non-replaced element: 渲染自身的 content，<br>例如 <code>&lt;a href=&quot;lijundong.com&quot;&gt;Leeon Blog&lt;/a&gt;</code> 此类，渲染出的内容来自自身。</li>
</ul>
</blockquote>
<h3 id="inline-内联-元素"><a href="#inline-内联-元素" class="headerlink" title="inline(内联) 元素"></a>inline(内联) 元素</h3><p>HTML5 中的常见 inline 元素如下：</p>
<ul>
<li>inline：span、strong、em</li>
<li>inline-block：input、button、textarea、select、img</li>
</ul>
<h3 id="vertical-align"><a href="#vertical-align" class="headerlink" title="vertical-align"></a>vertical-align</h3><p>vertical-align 作用于 inline 元素 以及 table-cell 元素，还有 <code>::first-letter</code> 和 <code>::first-line</code>，更多内容可以参见 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/vertical-align" target="_blank" rel="external">MDN</a></p>
<p>属性分类：</p>
<p>适用于 inline 元素的属性：<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* keyword values */</span></span><br><span class="line"><span class="attribute">vertical-align</span>: baseline;  <span class="comment">/*基于基线对齐*/</span></span><br><span class="line"><span class="attribute">vertical-align</span>: sub;</span><br><span class="line"><span class="attribute">vertical-align</span>: super;</span><br><span class="line"><span class="attribute">vertical-align</span>: text-top;</span><br><span class="line"><span class="attribute">vertical-align</span>: text-bottom;</span><br><span class="line"><span class="attribute">vertical-align</span>: middle;</span><br><span class="line"><span class="attribute">vertical-align</span>: top;</span><br><span class="line"><span class="attribute">vertical-align</span>: bottom;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* &lt;length&gt; values */</span></span><br><span class="line"><span class="attribute">vertical-align</span>: <span class="number">10em</span>;</span><br><span class="line"><span class="attribute">vertical-align</span>: <span class="number">4px</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* &lt;percentage&gt; values */</span></span><br><span class="line"><span class="attribute">vertical-align</span>: <span class="number">20%</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Global values */</span></span><br><span class="line"><span class="attribute">vertical-align</span>: inherit;</span><br><span class="line"><span class="attribute">vertical-align</span>: initial;</span><br><span class="line"><span class="attribute">vertical-align</span>: unset;</span><br></pre></td></tr></table></figure></p>
<p>适用于 table-cell 的属性：<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vertical-align</span>: top;</span><br><span class="line"><span class="attribute">vertical-align</span>: bottom;</span><br><span class="line"><span class="attribute">vertical-align</span>: middle;</span><br></pre></td></tr></table></figure></p>
<h3 id="回到问题"><a href="#回到问题" class="headerlink" title="回到问题"></a>回到问题</h3><p>问题代码示例如下，<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> &gt;</span><span class="css"></span><br><span class="line">    * &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">margin</span>:  <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">body</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">img</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">div</span> ,<span class="selector-tag">p</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"headpic.png"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>代码效果图如下，红框圈出部分为出现的白条<br><img src="http://source.lijundong.com/17-1-18/21458514-file_1484670835947_1531c.jpg" alt=""></p>
<p>通过对代码稍作修改可以轻松看出问题所在，实图如下</p>
<p><img src="http://source.lijundong.com/17-1-18/83589094-file_1484670475410_3d83.jpg" alt=""></p>
<p>有了上面的铺垫，现在回头看遇到的问题，就很简单了，究其原委，首先 img 元素默认对齐方式为 <code>vertical-align: baseline;</code>，这就导致了，baseline 以下的部分被空了出来，显示了背景的白色。</p>
<p>问题找到了，对症下药可得出下面的解决方案：</p>
<ul>
<li><p>根本上消除 img 的对齐方式 —— 块状化：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123; </span><br><span class="line">    <span class="attribute">display</span>: block; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>更改 img 对齐方式，以下三种均可</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">vertical-align</span>: top;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    <span class="attribute">vertical-align</span>: bottom;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>更改行高，行高是两条 baseline 之间的距离，因此可以暴力的让行高消失</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* font-size: 0; 当 line-height 使用数值、百分比或者 rem 定义时也可用这种方式，因为 line-height 参照的是 font-size 的值*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>遇到问题多多求证，即便是很常见的问题也会挖出大学问，在求证的过程中也不能尽用拿来主义，多参考 w3c 和 MDN 的文档。<br>写的过程中，修修补补了好几回，关于 vertical-align 的内容讲的很仓促，后面会补上，如果文中表达有误，烦请指出，感谢。</p>
<hr>
<p><em>参考：</em></p>
<ul>
<li><a href="http://www.imooc.com/learn/542" target="_blank" rel="external">CSS深入理解之vertical-align</a></li>
<li><a href="https://www.smashingmagazine.com/2012/12/css-baseline-the-good-the-bad-and-the-ugly/" target="_blank" rel="external">CSS Baseline: The Good, The Bad And The Ugly</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E5%9F%BA%E7%B7%9A" target="_blank" rel="external">基线 wiki</a></li>
<li><a href="http://stackoverflow.com/questions/23247467/how-css-line-height-is-measured" target="_blank" rel="external">How CSS line-height is measured?</a></li>
<li><a href="https://www.w3.org/Talks/2008/0911-CSS-Amsterdam/" target="_blank" rel="external">Understanding the CSS box model</a></li>
<li><a href="http://stackoverflow.com/questions/28363186/inline-elements-and-line-height" target="_blank" rel="external">Inline elements and line-height</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天在做一个静态页面时，图片底部出现一条 3px 高度的白边，既不是 margin 也不是 padding，找了好久没能解决，后来才发现与 line-height 相关，问题解决后查缺补漏。&lt;br&gt;这里作下笔记。&lt;/p&gt;
    
    </summary>
    
      <category term="css" scheme="http://lijundong.com/categories/css/"/>
    
    
      <category term="css" scheme="http://lijundong.com/tags/css/"/>
    
      <category term="inline" scheme="http://lijundong.com/tags/inline/"/>
    
      <category term="line-height" scheme="http://lijundong.com/tags/line-height/"/>
    
      <category term="baseline" scheme="http://lijundong.com/tags/baseline/"/>
    
  </entry>
  
  <entry>
    <title>可能是写了篇假的年终总结</title>
    <link href="http://lijundong.com/year-again-2017/"/>
    <id>http://lijundong.com/year-again-2017/</id>
    <published>2017-01-15T12:35:05.000Z</published>
    <updated>2017-01-15T15:05:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>2017 年的第一个月已经过了一半，一篇文章都没憋出来，先拿这篇凑数吧<br><a id="more"></a></p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=29393038&auto=0&height=66"></iframe>

<p>来京一月有半，除元旦和几位在北京的高中同学聚过一次，其余时间均在住处与公司之间兜转，回家的车票买在一周后，周五临时和两位相熟的朋友决定四(chi)处(chi)转(he)转(he)。<br>到什刹海后，被友人领去了一家巷子深处的烤肉店，味道胜于之前吃过的所有的烤肉，也刷新了之前因为学校周边的纸上烤肉给烤肉贴上的消极标签，加之老板为人亲切，全程都十分舒心。<br>午饭后沿着完全商业化的巷子无目的地走，顺便给他们俩找厕所，连续找了几处都没找到，其中一处是一小巷，巷内也许是住家或是商铺，可能与公厕的外形太过相似，他俩凭着直觉就走进去，也不顾入口处挂着的内无公厕的标识，我想巷内的人应该经历过游客 DDOS 攻击吧，一堆人不来买东西，在门前晃悠找厕所，哈哈！<br>本想着去后海看看，后来变了主意改去天坛溜达，我对北京的主要景点的印象还停留在七年前，初三毕业时学校组织的旅游。不同的是来的时候是夏天，这次是冬天。我对天坛的印象除了祈年殿，剩下的就是那些坐在回廊长凳上打牌的一群群老人，上次来的时候正值酷夏，天气热得很，但是天坛中却十分凉爽，那些聚在此处打牌的老人，真是惬意啊，从进门开始我便开始找那排回廊，直到看见那群老人还在那里，热闹非凡，中途还打趣说这是老年人聚众赌博，哈哈！会不会这些人中，七年前的那群人里会不会今天也在场的呢，想想也是十分有趣。</p>
<p>万物生老病死，规律使然，这些建筑也是一样。即便已经到了快凋零的年纪，但为了慕名而来的游客，还是被涂上了新世纪的胭脂，汉白玉石阶要么被换了新，要么被盖上了木板保护。<br>当时在小摊上买了一个天坛的木板立体拼图，回家后跟我姐一起拼起来，我爸又在表面涂了一层清漆，看着很好看。</p>
<p><img src="http://source.lijundong.com/17-1-15/45714704-file_1484489002339_ab0a.jpg" alt="天坛"></p>
<p>物理教材上出现的回音壁，大家都在墙边喊，不过效果甚微，可能是请求过多，回音壁宕机了吧，哈哈</p>
<p><img src="http://source.lijundong.com/17-1-15/86359476-file_1484489001885_c66.jpg" alt="回音壁"></p>
<p>估摸到了五点多，晚饭决定回西二旗找家火锅店再吃顿火锅，地铁到了中途，三个人已经十分疲惫，临时决定下车休息下，休息了十分钟又临时决定直接在附近找家火锅店解决晚饭，太任性了。</p>
<p>饭罢，各自回家。一切都非常愉快，除了一件，早晨出门刚换上干净衣服，吃了烤肉和火锅之后，全身都散发着火锅的芬芳，到了家，洗澡洗头，衣服全都得洗，这样的场景已经出现了两次，深受其扰，尤其在这样的冬天。</p>
<hr>
<p>我是严肃的分割线</p>
<p>16 年的事情都比较细碎，很多方向之前就了解过，大多浅尝辄止，这一年多数时间的工作都是修修补补。关于毕业之后去向的问题也迷茫过，像无头苍蝇乱飞乱撞。机缘巧合，来了北京实习，这段时间见了山，见了人，收获有的。</p>
<p>这是 17 年的第一篇，之前很多时候想写，认为内容太过简单或是对于那些知识的认知还不够细致，只好作罢，摄入和产出是成正比的，希望 17 年多多学习，多多产出，更多地考虑原理性问题，而不是一直停留在应用层面。学习一些酷酷的东西，对，就是拿来吹牛的，哈哈。</p>
<p>今年开始，不确定性越来越多，介于好奇与恐惧之间的感觉真是奇妙。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;2017 年的第一个月已经过了一半，一篇文章都没憋出来，先拿这篇凑数吧&lt;br&gt;
    
    </summary>
    
      <category term="生活" scheme="http://lijundong.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
      <category term="游记" scheme="http://lijundong.com/tags/%E6%B8%B8%E8%AE%B0/"/>
    
      <category term="总结" scheme="http://lijundong.com/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 自定义日志</title>
    <link href="http://lijundong.com/hexo-blog-custom-log/"/>
    <id>http://lijundong.com/hexo-blog-custom-log/</id>
    <published>2016-12-25T06:23:11.000Z</published>
    <updated>2017-03-22T06:48:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>在这里记录下 Blog 基于 Hexo 和 Next 主题的一些自定义。</p>
<ul>
<li>自定义 url</li>
<li>文末添加版权说明</li>
<li>文末添加推荐文章列表</li>
<li>博客迁移</li>
<li>添加备案信息</li>
<li>添加打赏功能</li>
</ul>
<a id="more"></a>
<h3 id="自定义-url"><a href="#自定义-url" class="headerlink" title="自定义 url"></a>自定义 url</h3><p>关于 url 的格式，建议在博客刚上线的时候就确定好，因为多说评论以及访客数据都是和 url 绑定的，每一次换 url 都意味着之前的多说评论数据和访问数据都会清空，我的的数据已经被清空过两次了，第一次是把 url 从中文更换为 英文，第二次就是这次，我将 url 的格式从 <code>domain/year/month/title</code> 换成了 <code>domain/title</code>，更简洁，也更容易理解链接的内容。</p>
<h4 id="更改方式"><a href="#更改方式" class="headerlink" title="更改方式"></a>更改方式</h4><p>在 Hexo 的配置文件 <code>_config.yml</code> 中<br>更改 <code>permalink:</code> 配置选项为 <code>permalink: :title/</code></p>
<p>关于 Permalinks 更多参数 可以参考官方文档 <a href="https://hexo.io/zh-cn/docs/permalinks.html" target="_blank" rel="external">Permalinks(永久链接)</a></p>
<h3 id="文末添加版权说明（Next-主题）"><a href="#文末添加版权说明（Next-主题）" class="headerlink" title="文末添加版权说明（Next  主题）"></a>文末添加版权说明（Next  主题）</h3><p>最近看后台数据的时候，发现一篇文章被 latex 社区收录了，挺高兴的，只是文章被修改了一些内容，于是想在每篇文末添加一个版权说明，方法很简单。</p>
<h4 id="更改方式-1"><a href="#更改方式-1" class="headerlink" title="更改方式"></a>更改方式</h4><p>首先在 <code>/hexo/themes/next/layout/_macro/post.swig</code> 文件，修改 <code>&lt;footer class=&quot;post-footer&quot;&gt; &lt;/footer&gt;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;footer class=&quot;post-footer&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &#123;# 添加版权信息 #&#125;</span><br><span class="line"></span><br><span class="line">    &#123;% if not is_index %&#125;</span><br><span class="line">        &lt;div class=&quot;copyright&quot; style=&quot;clear:both;&quot;&gt;</span><br><span class="line">           &lt;h3&gt;文档信息&lt;/h3&gt;</span><br><span class="line">           &lt;p&gt;&lt;span&gt;文章作者：&lt;/span&gt;&lt;a href=&quot;http://lijundong.com&quot; title=&quot;李俊冬的网络日志&quot;&gt;李俊冬&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">           &lt;p&gt;&lt;span&gt;发表时间：&lt;/span&gt;&#123;&#123; post.date.format(&quot;YYYY-M-D-HH:MM&quot;) &#125;&#125;&lt;/p&gt;</span><br><span class="line">           &lt;p&gt;&lt;span&gt;文章标题：&lt;/span&gt;&lt;a href=&quot;&#123;&#123; url_for(post.path) &#125;&#125;&quot;&gt;&#123;&#123; post.title &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">           &lt;p&gt;&lt;span&gt;原文链接：&lt;/span&gt;&lt;a href=&quot;&#123;&#123; url_for(post.path) &#125;&#125;&quot; title=&quot;&#123;&#123; post.title &#125;&#125;&quot;&gt;&#123;&#123; post.permalink &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">           &lt;p&gt;&lt;span&gt;版权声明：&lt;/span&gt;&lt;i class=&quot;fa fa-creative-commons&quot;&gt;&lt;/i&gt; &lt;a rel=&quot;license&quot; href=&quot;https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh&quot; title=&quot;自由转载-非商用-非衍生-保持署名 (创意共享3.0许可证)&quot;&gt;自由转载-非商用-非衍生-保持署名（创意共享3.0许可证）&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">           &lt;p&gt;&lt;strong&gt;为方便溯源，避免陈旧错误知识的误导，转载请保留以上信息&lt;/strong&gt;&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">    &#123;# 文末的标签 #&#125;</span><br><span class="line"></span><br><span class="line">    &#123;% if post.tags and post.tags.length and not is_index %&#125;</span><br><span class="line">        &lt;div class=&quot;post-tags&quot;&gt;</span><br><span class="line">          &#123;% for tag in post.tags %&#125;</span><br><span class="line">            &lt;a href=&quot;&#123;&#123; url_for(tag.path) &#125;&#125;&quot; rel=&quot;tag&quot;&gt;#&#123;&#123; tag.name &#125;&#125;&lt;/a&gt;</span><br><span class="line">          &#123;% endfor %&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">         &#123;# 使用 list_posts 添加了文章列表 #&#125;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;posts-recommend&quot;&gt;</span><br><span class="line">            &lt;h3&gt;更多文章&lt;/h3&gt;</span><br><span class="line">               &#123;&#123; list_posts() &#125;&#125;  </span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">    &#123;# 此处是前后文章导航，因为上面添加了推荐文章列表，我把这一块注释了 #&#125;</span><br><span class="line"></span><br><span class="line">    &#123;# &#123;% if not is_index and (post.prev or post.next) and not navlessPost %&#125;</span><br><span class="line">        &lt;div class=&quot;post-nav&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;post-nav-next post-nav-item&quot;&gt;</span><br><span class="line">            &#123;% if post.next %&#125;</span><br><span class="line">              &lt;a href=&quot;&#123;&#123; url_for(post.next.path) &#125;&#125;&quot; rel=&quot;next&quot; title=&quot;&#123;&#123; post.next.title &#125;&#125;&quot;&gt;</span><br><span class="line">                &lt;i class=&quot;fa fa-chevron-left&quot;&gt;&lt;/i&gt; &#123;&#123; post.next.title &#125;&#125;</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">            &#123;% endif %&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=&quot;post-nav-prev post-nav-item&quot;&gt;</span><br><span class="line">            &#123;% if post.prev %&#125;</span><br><span class="line">              &lt;a href=&quot;&#123;&#123; url_for(post.prev.path) &#125;&#125;&quot; rel=&quot;prev&quot; title=&quot;&#123;&#123; post.prev.title &#125;&#125;&quot;&gt;</span><br><span class="line">                &#123;&#123;post.prev.title&#125;&#125; &lt;i class=&quot;fa fa-chevron-right&quot;&gt;&lt;/i&gt;</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">            &#123;% endif %&#125;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#123;% endif %&#125; #&#125;</span><br><span class="line">  &#123;% set isLast = loop.index % page.per_page === 0 %&#125;</span><br><span class="line">  &#123;% if is_index and not isLast %&#125;</span><br><span class="line">    &lt;div class=&quot;post-eof&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">&lt;/footer&gt;</span><br></pre></td></tr></table></figure>
<h3 id="文末添加推荐文章列表"><a href="#文末添加推荐文章列表" class="headerlink" title="文末添加推荐文章列表"></a>文末添加推荐文章列表</h3><p>我将文末的前后文章导航页去除，通过 <code>list_posts()</code> 方法添加了最近的文章列表</p>
<p>具体代码如下，完整代码可参见上一条完整代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;posts-recommend&quot;&gt;</span><br><span class="line">    &lt;h3&gt;更多文章&lt;/h3&gt;</span><br><span class="line">    &#123;&#123; list_posts() &#125;&#125;  </span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>关于 <code>list_posts()</code> 的用法，更多用法可参照官方文档 <a href="https://hexo.io/zh-cn/docs/helpers.html#list-posts" target="_blank" rel="external">list_posts</a></p>
<h3 id="博客迁移"><a href="#博客迁移" class="headerlink" title="博客迁移"></a>博客迁移</h3><h4 id="粗暴复制"><a href="#粗暴复制" class="headerlink" title="粗暴复制"></a>粗暴复制</h4><p>如果你更滑了新的电脑，迁移 hexo 的博客很简单，我的方式是直接复制 hexo 博客目录(不包含 node_modules 和 public 目录)，在新的电脑中执行 <code>npm install hexo-cli -g</code> 安装 hexo，在博客目录下执行 <code>npm install</code> （package.json 中包含所有的依赖信息），如果 node 版本不一致执行 <code>npm rebuild</code> 命令重新编译。git 的相关操作在这里不再赘述。</p>
<h4 id="优雅的云备份"><a href="#优雅的云备份" class="headerlink" title="优雅的云备份"></a>优雅的云备份</h4><p>复制太过简单粗暴，有更优雅的方式，就是当作 git 项目托管在平台上，如果不想作为 public 项目托管的话，可以选择 github 的付费托管或者国内的 coding 平台进行托管。</p>
<p>如果你的主题是 clone 的平台上的开源项目，主题本身就存在版本控制，那么需要知道知道 <a href="https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97" target="_blank" rel="external">Git 工具-子模块</a>。</p>
<h3 id="添加备案信息"><a href="#添加备案信息" class="headerlink" title="添加备案信息"></a>添加备案信息</h3><p>我用的是 NEXT 的主题，直接选择修改 <code>themes&gt;next&gt;layout &gt;_partials&gt;footer.swig</code>，追加以下信息，div 中包裹的是备案信息。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;width:100%;height:50"</span>&gt;</span></span><br><span class="line">蜀ICP备16024716号-1</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="添加打赏功能"><a href="#添加打赏功能" class="headerlink" title="添加打赏功能"></a>添加打赏功能</h3><p>在 NEXT 主题配置文件中，添加打赏配置，分别是微信和支付宝的支付二维码</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">reward_comment:</span> 鸡腿还是可乐 ？</span><br><span class="line"><span class="string">wechatpay:</span> <span class="string">http:</span><span class="comment">//source.lijundong.com/17-2-13/59734441-file_1486916997049_2842.png</span></span><br><span class="line"><span class="string">alipay:</span> <span class="string">http:</span><span class="comment">//source.lijundong.com/17-2-13/74686190-file_1486916997175_15cd8.png</span></span><br></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在这里记录下 Blog 基于 Hexo 和 Next 主题的一些自定义。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;自定义 url&lt;/li&gt;
&lt;li&gt;文末添加版权说明&lt;/li&gt;
&lt;li&gt;文末添加推荐文章列表&lt;/li&gt;
&lt;li&gt;博客迁移&lt;/li&gt;
&lt;li&gt;添加备案信息&lt;/li&gt;
&lt;li&gt;添加打赏功能&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="工具使用" scheme="http://lijundong.com/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="hexo" scheme="http://lijundong.com/tags/hexo/"/>
    
      <category term="next" scheme="http://lijundong.com/tags/next/"/>
    
  </entry>
  
  <entry>
    <title>小记 - Hexo 部署到阿里云服务器</title>
    <link href="http://lijundong.com/note-hexo-deploy-on-server/"/>
    <id>http://lijundong.com/note-hexo-deploy-on-server/</id>
    <published>2016-12-18T15:58:45.000Z</published>
    <updated>2016-12-18T17:18:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>前几天把 hexo blog 迁移到阿里云服务器，全程看别人的文章，每篇文章描述的方式不尽相同，加之软件环境的不同，再加之我的理解能力短板，中间走了好几次弯路，配完之后，对整体过程加深了理解，之后又重新看了 <code>git hook</code> 的文档，结合配置过程，这里做一次小记。<br><a id="more"></a></p>
<blockquote>
<p><strong>注：</strong></p>
<ul>
<li>因为是迁移，所以这篇笔记不会介绍 Hexo 相关用法。</li>
<li>网上详细的教程非常多，这里细节不做详述，只会总结整体流程以及过程中遇到的坑</li>
</ul>
</blockquote>
<p>之前使用 Hexo 部署静态博客到 Github 或者 coding，也没有细究实现原理，但是一直在折腾，后来看到了下面这张图，这是从 <code>hexo d -g</code> 命令一直到浏览器访问到博客页面的整个流程的架构图。<br>在部署之前看懂这张图，部署过程会十分流畅。</p>
<p><img src="http://source.lijundong.com/16-12-19/68486025-file_1482077506840_3562.png" alt=""></p>
<h3 id="流程架构"><a href="#流程架构" class="headerlink" title="流程架构"></a>流程架构</h3><ul>
<li>Hexo 文件结构下，<code>\source</code> 存放所有 <code>markdown</code> 原文件，我们写的文章 存放在 <code>\source\_post</code> 目录下</li>
<li><code>hexo generate</code> 命令将 <code>\source</code> 下的 <code>markdown</code> 文件编译为 <code>html</code> 文件存放到 <code>\public</code> 目录下，并且根据时间、tag、category 等生成了索引页面。</li>
<li><code>hexo deploy</code> 命令将把 <code>\public</code> 目录下内容推到服务器。</li>
<li>现在博文已经在服务器了，只不过是在仓库里，我们将内容 <code>checkout</code> 或者 <code>clone</code> 到某个可以通过 <code>nginx</code> 访问的目录下，例如 <code>\var\www</code>(如无 <code>www</code>，可以新建)，<strong>注意：不要放在用户文录下</strong></li>
<li>通过 <code>nginx</code> 或者其他服务器，将静态站点暴露出去，到这里，所有的核心工作已经完成了</li>
</ul>
<h3 id="DIY"><a href="#DIY" class="headerlink" title="DIY"></a>DIY</h3><p>如果需要 DIY，可以分以下三步走</p>
<ul>
<li>搭建 Git 服务器：中英文链接在文末，可能需要花点时间</li>
<li>编写 <code>post-receive</code> 脚本：中英文链接在文末，这一步，可以简单粗暴</li>
<li>配置 <code>nginx</code>：配置 <code>nginx</code> 服务器，这个也很简单</li>
</ul>
<h3 id="仅供参考"><a href="#仅供参考" class="headerlink" title="仅供参考"></a>仅供参考</h3><p>关于 Git 服务器，可以参考 Git 官网文档，或者是廖雪峰先生的教程，做到正常推拉即可。</p>
<p>关于 <code>git hooks</code>，昨天写的小记 <a href="http://lijundong.com/2016/12/16/git-hooks/">Git Hooks</a>，可以了解下<br>上面我说这一步可以简单粗暴，下面是我的服务器上的 <code>post-receive</code> 脚本，我把代码 从仓库直接 <code>clone</code> 到 <code>/var/www/hexo</code> 目录下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">unset GIT_DIR</span><br><span class="line">cd /var/www/hexo</span><br><span class="line">git pull origin master</span><br></pre></td></tr></table></figure>
<p>关于 <code>nginx</code> 配置</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span>  &#123;</span><br><span class="line">    <span class="comment"># 指定端口</span></span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="comment"># 绑定域名</span></span><br><span class="line">    <span class="attribute">server_name</span> localhost www.lijundong.com lijundong.com;</span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/domain1.access.log;</span><br><span class="line">    <span class="comment"># 入口文件</span></span><br><span class="line">    <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">    <span class="comment"># 博客路径</span></span><br><span class="line">    <span class="attribute">root</span>  /var/www/hexo;</span><br><span class="line">    <span class="attribute">error_page</span>   <span class="number">404</span>   /<span class="number">404</span>.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>教程虽好，且看且学习，知其然，更应知其所以然</p>
<p>晚安！</p>
<p>参考:</p>
<ul>
<li><a href="https://segmentfault.com/a/1190000005723321" target="_blank" rel="external">架构图</a></li>
<li><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137583770360579bc4b458f044ce7afed3df579123eca000" target="_blank" rel="external">搭建Git服务器 - 廖雪峰</a></li>
<li><a href="https://git-scm.com/book/en/v2/Git-on-the-Server-Setting-Up-the-Server" target="_blank" rel="external">Git on the Server - Setting Up the Server</a></li>
<li><a href="https://github.com/geeeeeeeeek/git-recipes/wiki/5.4-Git%E9%92%A9%E5%AD%90%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BD%A0%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81" target="_blank" rel="external">5.4 Git钩子：自定义你的工作流</a></li>
<li><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks" target="_blank" rel="external">8.3 Customizing Git - Git Hooks</a></li>
<li><a href="http://lijundong.com/2016/12/16/git-hooks/">Git Hooks</a></li>
<li><a href="http://lijundong.com/2016/10/12/nginx-conficure-domains-to-servers/">Nginx 配置多个Node服务的域名</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前几天把 hexo blog 迁移到阿里云服务器，全程看别人的文章，每篇文章描述的方式不尽相同，加之软件环境的不同，再加之我的理解能力短板，中间走了好几次弯路，配完之后，对整体过程加深了理解，之后又重新看了 &lt;code&gt;git hook&lt;/code&gt; 的文档，结合配置过程，这里做一次小记。&lt;br&gt;
    
    </summary>
    
      <category term="问题解决" scheme="http://lijundong.com/categories/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
    
      <category term="服务器" scheme="http://lijundong.com/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
      <category term="hexo" scheme="http://lijundong.com/tags/hexo/"/>
    
      <category term="阿里云" scheme="http://lijundong.com/tags/%E9%98%BF%E9%87%8C%E4%BA%91/"/>
    
      <category term="hook" scheme="http://lijundong.com/tags/hook/"/>
    
  </entry>
  
  <entry>
    <title>Git Hooks</title>
    <link href="http://lijundong.com/git-hooks/"/>
    <id>http://lijundong.com/git-hooks/</id>
    <published>2016-12-16T11:25:34.000Z</published>
    <updated>2016-12-18T11:14:02.000Z</updated>
    
    <content type="html"><![CDATA[<p><code>Git Hooks</code> 是 Git 提供的允许用户自定义的脚本，这些脚本会在特定条件下被触发，我们可以通过自定义脚本来定制 Git。<br>之前迁移博客到阿里云，<code>Git Hooks</code> 就是非常重要的一部分，我在服务器上使用的 Hook 类型是 <code>post-receive</code>，今天把相关部分官方的文档重新看了下，这篇笔记是在官方文档的基础上进行演绎的。<br><a id="more"></a></p>
<h3 id="安装-Hooks"><a href="#安装-Hooks" class="headerlink" title="安装 Hooks"></a>安装 Hooks</h3><p>多数情况下，所有的 hook 放在 <code>.git/hooks</code> 目录下，当我们执行 <code>git init</code> 时，Git 就会将一些示例脚本填充在 <code>.git/hooks</code> 目录下，这些示例脚本命名以 <code>.sample</code> 后缀，默认不执行，如果想执行这些脚本，可以重命名(去掉 <code>.sample</code> 后缀)，也可以自定义脚本，保存在 <code>.git/hooks</code> 目录下，<strong>并且给予脚本执行权限</strong>。</p>
<p><strong>需要注意的是，Hook  不随项目的克隆而进行复制，也不受版本控制的影响。</strong></p>
<p>Hook 根据使用场景可以分为 客户端(本地) Hooks 和服务端 Hooks。不同使用场景下，根据不同触发条件又分为若干类。</p>
<h3 id="客户端-本地-Hook"><a href="#客户端-本地-Hook" class="headerlink" title="客户端(本地) Hook"></a>客户端(本地) Hook</h3><h4 id="pre-commit"><a href="#pre-commit" class="headerlink" title="pre-commit"></a>pre-commit</h4><p>在 <code>git commit</code> 命令之后，这个脚本会首先运行，用来检查提交的快照，检查有没有遗漏，或者检查一些自定义的选项(例如检查代码格式，检查空格等)，当脚本返回非 0 值时，则中断 <code>commit</code>。<br>你也可以通过 <code>git commit --no-verify</code> 命令提交来跳过这个过程。</p>
<p>参数： 无</p>
<h4 id="prepare-commit-msg"><a href="#prepare-commit-msg" class="headerlink" title="prepare-commit-msg"></a>prepare-commit-msg</h4><p>在 <code>commit</code> 过程中需要编辑 <code>commit message</code>，这个脚本会在默认 <code>commit message</code> 生成之后，在你看到编辑器之前运行，通过这个脚本可以修改默认的 <code>commit message</code>。</p>
<p>参数：</p>
<ul>
<li>默认 <code>commit message</code> 文件路劲</li>
<li>提交类型</li>
<li>commit SHA-1(可选)</li>
</ul>
<h4 id="commit-msg"><a href="#commit-msg" class="headerlink" title="commit-msg"></a>commit-msg</h4><p>这个脚本可以用来检验用户编辑的 <code>commit message</code>。可以用来检查 <code>commit message</code> 是否合乎规范。</p>
<p>参数：</p>
<ul>
<li>存放用户编写的 <code>commit message</code> 的临时文件的路劲</li>
</ul>
<h4 id="pre-rebase"><a href="#pre-rebase" class="headerlink" title="pre-rebase"></a>pre-rebase</h4><p>这个脚本会在 <code>git rebase</code> 命令之前运行，在返回非 0 值时，会中断操作。<br>你可以通过这个脚本来禁用 <code>rebase</code>，示例如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"># disallow rebasing any commits</span><br><span class="line">echo &quot;pre-rebase: Rebasing is disallowed.&quot;</span><br><span class="line">exit 1</span><br></pre></td></tr></table></figure>
<h3 id="服务端-Hook"><a href="#服务端-Hook" class="headerlink" title="服务端 Hook"></a>服务端 Hook</h3><p>服务端的 Hook 允许我们在 <code>git push</code> 的不同阶段进行操作。</p>
<h4 id="pre-receive"><a href="#pre-receive" class="headerlink" title="pre-receive"></a>pre-receive</h4><p>客户端 push 过来的内容，必须通过这个脚本的检查来判断接受与否。</p>
<h4 id="update"><a href="#update" class="headerlink" title="update"></a>update</h4><p>这个脚本在代码更新之前执行。<br><code>update</code> 和 <code>pre-receive</code> 很相似，不同的是，如果我们想把代码推到不同分支，那么 <code>pre-receive</code> 只会执行一次，而 <code>update</code> 在每个分支更新之前都会执行一次。</p>
<h4 id="post-receive"><a href="#post-receive" class="headerlink" title="post-receive"></a>post-receive</h4><p><code>post-receive</code> 脚本在所有流程完成之后被触发，前几天迁移博客时才用到，服务器代码库合并了我的 <code>push</code> 后，通过 <code>post-receive</code> 脚本将仓库 <code>clone</code> 到我的博客目录下，以达到更新效果。</p>
<p>参考:</p>
<ul>
<li><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks" target="_blank" rel="external">Customizing Git - Git Hooks</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;Git Hooks&lt;/code&gt; 是 Git 提供的允许用户自定义的脚本，这些脚本会在特定条件下被触发，我们可以通过自定义脚本来定制 Git。&lt;br&gt;之前迁移博客到阿里云，&lt;code&gt;Git Hooks&lt;/code&gt; 就是非常重要的一部分，我在服务器上使用的 Hook 类型是 &lt;code&gt;post-receive&lt;/code&gt;，今天把相关部分官方的文档重新看了下，这篇笔记是在官方文档的基础上进行演绎的。&lt;br&gt;
    
    </summary>
    
      <category term="工具使用" scheme="http://lijundong.com/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="git" scheme="http://lijundong.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>测试 - Hexo 部署到阿里云</title>
    <link href="http://lijundong.com/deploy-hexo-blog-on-server/"/>
    <id>http://lijundong.com/deploy-hexo-blog-on-server/</id>
    <published>2016-12-13T18:55:57.000Z</published>
    <updated>2016-12-23T12:12:02.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>测试 git push 之后 hook 触发没有</p>
</blockquote>
<p>Hexo 最开始部署在 Github，因为速度太慢，访问性太差，而且偶尔还被 DDOS，为了缩短加载时间，转到了 Coding 上，今天把它迁到了阿里云上。</p>
<p>我是测试的分割线</p>
<hr>
<p>hook 生效，push 上去即可更新<br>生活又开始有希望起来</p>
<a id="more"></a>
<blockquote>
<p>PS：Coding 正在变得越来越好，提供的服务也越来越强大，工程师八哥半夜还在回复 Bug，每一次更新都会带来惊喜。</p>
</blockquote>
<p>迁移到 Coding 之后，便捷提高了，只不过在给 <code>Coidng Page</code> 绑定自定义域名时出现了问题，绑定域名之后，通过自定义域名访问时，通过 <code>http</code> 方式，链接会被重置，必须手动 <code>https</code> 或者通过代理访问……这还怎么玩</p>
<p>为了对比，我借了胜祥同学的二级域名绑定了一次，正常访问，只可能是域名的问题了</p>
<p>问阿里云的工程师，得到的答复是服务器那边的问题，问 Coding 的工程师，他们也一头雾水，最后的结论是 <code>可能被墙了？</code></p>
<p>买过域名之后一直没备案，后来被屏蔽了，备案之后屏蔽解除了，不知道这个问题跟那次屏蔽有无关联</p>
<p>不想再被这样的问题困扰，自己动手，丰衣足食，思来想去还是直接放服务器上。</p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;测试 git push 之后 hook 触发没有&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Hexo 最开始部署在 Github，因为速度太慢，访问性太差，而且偶尔还被 DDOS，为了缩短加载时间，转到了 Coding 上，今天把它迁到了阿里云上。&lt;/p&gt;
&lt;p&gt;我是测试的分割线&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;hook 生效，push 上去即可更新&lt;br&gt;生活又开始有希望起来&lt;/p&gt;
    
    </summary>
    
      <category term="问题解决" scheme="http://lijundong.com/categories/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    
    
      <category term="服务器" scheme="http://lijundong.com/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
      <category term="hexo" scheme="http://lijundong.com/tags/hexo/"/>
    
      <category term="git" scheme="http://lijundong.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>SublimeText 配置 LaTeX 编辑器</title>
    <link href="http://lijundong.com/start-latex-and-configure-latext-editor-with-sublime/"/>
    <id>http://lijundong.com/start-latex-and-configure-latext-editor-with-sublime/</id>
    <published>2016-11-23T13:15:40.000Z</published>
    <updated>2017-02-12T07:45:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>上一篇 <a href="http://jundong.coding.me/2016/11/17/novel-crawler-by-Nodejs/" target="_blank" rel="external">Node.js 实现简单小说爬虫</a>，文末处理 Markdown 文件时，因为 Pandoc 对中文支持度不好，折腾了一会没解决，退而求其次选择用 Chrome 打印功能把 Markdown 文件转成 PDF。折腾不出来肯定要继续折腾呀，最近抽空在 Ubuntu 配置了下，终于支持了中文文档转换，但是用的 LaTeX 模板是在网上找的，想自己写一个，顺便了解下 LaTeX。<br>工欲善其事，必先利其器。这里笔记下 SublimeTeXt3 下用 TeXlive 配置 LaTeX 编辑环境。<br><a id="more"></a></p>
<h3 id="系统-amp-软件-版本"><a href="#系统-amp-软件-版本" class="headerlink" title="系统 &amp; 软件 版本"></a>系统 &amp; 软件 版本</h3><ul>
<li>windows 10</li>
<li><a href="https://www.sublimetext.com/3" target="_blank" rel="external">Sublime Text3</a></li>
<li><a href="http://mirror.hust.edu.cn/CTAN/systems/texlive/Images/" target="_blank" rel="external">TeX Live 2016</a></li>
</ul>
<h3 id="关于-TeX、LaTeX、TeX-Live"><a href="#关于-TeX、LaTeX、TeX-Live" class="headerlink" title="关于 TeX、LaTeX、TeX Live"></a>关于 TeX、LaTeX、TeX Live</h3><h4 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h4><p><strong>专有名词，注意名词大小写</strong><br><strong>TeX：</strong>美国计算机教授高德纳 (Donald Ervin Knuth) 为了排版他的著作 『The Art of Computer Programming』(TAOCP) 编写的功能强大的排版软件。<br><strong>LaTeX：</strong>美国计算机科学家莱斯利·兰伯特为了准备他的著作 『The Great American Concurrency Book』基于 TeX 开发的宏，详见<a href="https://zh.wikipedia.org/wiki/LaTeX" target="_blank" rel="external">Wiki</a><br><strong>TeX Live：</strong>是由国际 TEX 用户组整理和发布的TEX软件发行套装，详见<a href="https://zh.wikipedia.org/wiki/TeX_Live" target="_blank" rel="external">wiki</a></p>
<h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><h5 id="公式编辑"><a href="#公式编辑" class="headerlink" title="公式编辑"></a>公式编辑</h5><ul>
<li>在线：<a href="https://www.codecogs.com/latex/eqneditor.php?lang=zh-cn" target="_blank" rel="external">在线 LaTeX 公式编辑器</a></li>
<li>Office套件：在 office 套件里，通过 <a href="http://www.dessci.com/en/products/mathtype/" target="_blank" rel="external">MathType</a> 可以很方便地编辑公式</li>
<li>LaTeX：通过 LaTeX 语法输入公式</li>
</ul>
<h5 id="排版"><a href="#排版" class="headerlink" title="排版"></a>排版</h5><p>公式编辑只是 LaTeX 功能中的一项，排版才能体现出它的强大的功能，具体效果可以参见下面的 demo。<br><img src="http://source.lijundong.com/public/16-11-24/95505961.jpg" alt=""></p>
<h3 id="配置-LaTeX-编辑器"><a href="#配置-LaTeX-编辑器" class="headerlink" title="配置 LaTeX 编辑器"></a>配置 LaTeX 编辑器</h3><p>使用 LaTeX 进行排版的过程即，<strong>编辑完 TeX 文件，通过 TeX Live 将 LaTeX 文件编译成 PDF 文件</strong><br>为了操作方便，通过配置 Sublime 的插件 <code>LaTeXTools</code>，可快捷调用(快捷键：<code>Ctrl + B</code>) Tex Live 来编译文件，高效率编辑。 </p>
<p><strong>可选：</strong>高效到底，通过配置 sumatraPDF ，可在 PDF 生成后 自动在 sumatraPDF 中打开，实现实时预览的效果。</p>
<h4 id="安装-TeXlive"><a href="#安装-TeXlive" class="headerlink" title="安装 TeXlive"></a>安装 TeXlive</h4><p><strong>ISO 镜像下载地址：</strong><a href="http://mirror.hust.edu.cn/CTAN/systems/texlive/Images/" target="_blank" rel="external">TeX Live 2016</a><br>下载完成后，加载镜像，进入文件点击 <code>install-tl-windows.bat</code>(直接安装) 或者 <code>install-tl-advanced.bat</code>(提供可选项) 开始安装。</p>
<p>等待中……</p>
<p>安装完成后，还需要一步，<strong>将 LaTeX 执行文件的路径加入系统环境变量</strong><br>我在本机的路径为 <code>C:\texlive\2016\bin\win32</code>，加入系统环境变量后，可通过在 命令提示符(CMD) 执行 <code>latex</code> 命令检查，<strong>注：可能需要重启电脑</strong>。</p>
<h4 id="安装-sumatraPDF-可选"><a href="#安装-sumatraPDF-可选" class="headerlink" title="安装 sumatraPDF (可选)"></a>安装 sumatraPDF (可选)</h4><p>关于 Sumatra PDF：Sumatra PDF is a free PDF, eBook (ePub, Mobi), XPS, DjVu, CHM, Comic Book (CBZ and CBR) reader for Windows.</p>
<p>下载地址：<a href="http://www.sumatrapdfreader.org/download-free-pdf-viewer.html" target="_blank" rel="external">Sumatra PDF </a></p>
<p>添加路径到系统环境变量：同 TeX Live 一样，为了能在 CMD 中通过命令执行程序，需要将 Sumatra PDF 执行文件的路径添加到系统环境变量，通过在 CMD 中执行命令检测配置是否成功。<strong>注：可能需要重启电脑</strong></p>
<h4 id="Sublime-安装-LaTeXtools-插件"><a href="#Sublime-安装-LaTeXtools-插件" class="headerlink" title="Sublime 安装 LaTeXtools 插件"></a>Sublime 安装 LaTeXtools 插件</h4><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><p>如果对于 Sublime Text 不熟悉的同学，可以参见 <a href="http://jundong.coding.me/2016/03/17/SublimeText-extension-recommand/" target="_blank" rel="external">SublimeText 插件推荐</a><br>通过 Package Control 安装插件 <code>LaTeXTools</code></p>
<h5 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h5><p>配置文件路径：<br><code>Preference &gt; Package Setting &gt; LaTeXTools &gt; Setting-User</code></p>
<p>配置以下参数<br><code>texpath</code>：TeX Live 可执行文件的路径(即添加到环境变量中的路径)<br><code>distro</code>：修改为 <code>texlive</code><br><code>sumtra</code>：sumatraPDF 可执行文件的路径(即添加到环境变量中的路径)</p>
<figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"windows"</span>: &#123;</span><br><span class="line">    <span class="string">"texpath"</span> : <span class="string">"C:\\texlive\\2016\\bin\\win32"</span>,</span><br><span class="line">    <span class="string">"distro"</span> : <span class="string">"texlive"</span>,</span><br><span class="line">    <span class="string">"sumatra"</span>: <span class="string">"C:\\Program Files\\SumatraPDF"</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="配置-sumatraPDF-反向搜索"><a href="#配置-sumatraPDF-反向搜索" class="headerlink" title="配置 sumatraPDF 反向搜索"></a>配置 sumatraPDF 反向搜索</h5><p>路径为 SublimeText 的可执行文件路劲，如下示例<br><code>sumatrapdf.exe -inverse-search &quot;\&quot;C:\Program Files\Sublime Text 3\sublime_text.exe\&quot; \&quot;%f:%l\&quot;&quot;</code></p>
<h3 id="LaTeX-上手"><a href="#LaTeX-上手" class="headerlink" title="LaTeX 上手"></a>LaTeX 上手</h3><p>所有配置都完成了，下面可以测试成果了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">\documentclass[UTF8]&#123;ctexart&#125;</span><br><span class="line">\title&#123;SublimeText 配置 LaTeX 编辑器&#125;</span><br><span class="line">\author&#123;Leeon&#125;</span><br><span class="line">\date&#123;\today&#125;</span><br><span class="line">\usepackage&#123;graphicx&#125;</span><br><span class="line">\usepackage&#123;geometry&#125;</span><br><span class="line">\geometry&#123;papersize=&#123;21cm,29.7cm&#125;&#125;</span><br><span class="line">\geometry&#123;left=2.5cm,right=2.5cm,top=3cm,bottom=3cm&#125;</span><br><span class="line">\begin&#123;document&#125;</span><br><span class="line">\maketitle</span><br><span class="line">\tableofcontents</span><br><span class="line">\section&#123;系统 \&amp; 软件 版本&#125;</span><br><span class="line">\begin&#123;center&#125;</span><br><span class="line">\includegraphics[width = .4\textwidth]&#123;boat.jpg&#125;</span><br><span class="line">\end&#123;center&#125;</span><br><span class="line">\section&#123;名词解释&#125;</span><br><span class="line">专有名词，注意名词大小写</span><br><span class="line">TeX：美国计算机教授高德纳 (Donald Ervin Knuth) 为了排版他的著作 『The Art of Computer Programming』(TAOCP) 编写的功能强大的排版软件。</span><br><span class="line">LaTeX：美国计算机科学家莱斯利·兰伯特为了准备他的著作 『The Great American Concurrency Book』基于 TeX 开发的宏，详见Wiki</span><br><span class="line">TeX Live：是由国际 TEX 用户组整理和发布的TEX软件发行套装，详见wiki</span><br><span class="line">\section&#123;使用场景&#125;</span><br><span class="line">\subsection&#123;公式编辑&#125;</span><br><span class="line">\subsection&#123;排版&#125;</span><br><span class="line">\section&#123;配置 LaTeX 编辑器&#125;</span><br><span class="line">\subsection&#123;安装 TeXlive&#125;</span><br><span class="line">\subsection&#123;安装 sumatraPDF (可选)&#125;</span><br><span class="line">\subsection&#123;Sublime 安装 LaTeXtools 插件&#125;</span><br><span class="line">\subsubsection&#123;安装&#125;</span><br><span class="line">\subsubsection&#123;配置&#125;</span><br><span class="line">\end&#123;document&#125;</span><br></pre></td></tr></table></figure></p>
<p>编译效果：</p>
<p><img src="http://source.lijundong.com/public/16-11-24/95505961.jpg" alt=""></p>
<hr>
<p>知道 LaTeX 是大一高数课，林军老师的 PPT 的公式都是用 MathType 编辑，用过一段时间，高数结课后没再接触，之后在王垠的<a href="http://www.yinwang.org/blog-cn/2014/01/04/authority" target="_blank" rel="external">博客</a>里，看到他提到一些关于 TeX 的观点，最后却只记得他拿了 Donald Knuth 的支票，觉得此人厉害。再次和 TeX 擦肩而过……<br>还好这次花了时间去了解，让我看到一个新的维度世界，感觉很开心</p>
<p>Better late than never</p>
<hr>
<p><em>参考：</em></p>
<ul>
<li><a href="https://th0.me/1737.html" target="_blank" rel="external">TeXLive + Sublime TeXt 3 + LaTeXTools 环境配置</a></li>
<li><a href="http://liam0205.me/2014/09/08/LaTeX-introduction/" target="_blank" rel="external">一份其实很短的 LaTeX 入门文档</a></li>
<li><a href="http://attach3.bdwm.net/attach/boards/MathTools/M.1364651898.A/TeX_intro_talk.pdf" target="_blank" rel="external">LaTeX 入门</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;上一篇 &lt;a href=&quot;http://jundong.coding.me/2016/11/17/novel-crawler-by-Nodejs/&quot;&gt;Node.js 实现简单小说爬虫&lt;/a&gt;，文末处理 Markdown 文件时，因为 Pandoc 对中文支持度不好，折腾了一会没解决，退而求其次选择用 Chrome 打印功能把 Markdown 文件转成 PDF。折腾不出来肯定要继续折腾呀，最近抽空在 Ubuntu 配置了下，终于支持了中文文档转换，但是用的 LaTeX 模板是在网上找的，想自己写一个，顺便了解下 LaTeX。&lt;br&gt;工欲善其事，必先利其器。这里笔记下 SublimeTeXt3 下用 TeXlive 配置 LaTeX 编辑环境。&lt;br&gt;
    
    </summary>
    
      <category term="工具使用" scheme="http://lijundong.com/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="LaTeX" scheme="http://lijundong.com/tags/LaTeX/"/>
    
      <category term="sublime" scheme="http://lijundong.com/tags/sublime/"/>
    
  </entry>
  
  <entry>
    <title>Node.js 实现简单小说爬虫</title>
    <link href="http://lijundong.com/novel-crawler-by-Nodejs/"/>
    <id>http://lijundong.com/novel-crawler-by-Nodejs/</id>
    <published>2016-11-17T14:17:32.000Z</published>
    <updated>2017-02-12T07:45:02.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近因为剧荒，老大追了爱奇艺的一部网剧，由丁墨的同名小说《美人为馅》改编，目前已经放出两季，虽然整部剧槽点满满，但是老大看得不亦乐乎，并且在看完第二季之后跟我要小说资源，直接要奔原著去看结局……<br>随手搜了下，都是在线资源，下载的话需要登录，注册登录好麻烦，写个爬虫玩玩也好，于是动手用 node 写了一个，这里做下笔记<br><a id="more"></a></p>
<h3 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h3><ul>
<li>获取 URLs 列表(请求资源 <code>request</code> 模块)</li>
<li>根据 URLs 列表获取相关页面源码(可能遇到页面编码问题，<code>iconv-lite</code> 模块)</li>
<li>源码解析，获取小说信息( <code>cheerio</code> 模块)</li>
<li>保存小说信息到 Markdown 文件，并且加适当修饰以及章节信息(写文件 <code>fs</code>、同步请求资源 <code>sync-request</code> 模块)</li>
<li>Markdown 转 PDF (使用 Pandoc 或者 Chrome 的打印功能)</li>
</ul>
<h3 id="获取-URLs"><a href="#获取-URLs" class="headerlink" title="获取 URLs"></a>获取 URLs</h3><p>根据小说的导航页，获取小说所有章节的 URL，并且以 JSON 数组的方式存储。</p>
<ul>
<li>首选通过 <code>http.get()</code> 方法获取页面源码</li>
<li>获取到源码，打印发现中文乱码，查看发现 <code>charset = &#39;gbk&#39;</code>，需要进行转码</li>
<li>使用 <code>iconv-lite</code> 模块进行转码，中文显示正常后开始解析源码，获取需要的 URL，为了更方便地解析，需要引进 <code>cheerio</code> 模块，<code>cheerio</code> 可以理解为运行在后台的 jQuery，用法与 jQuery 也十分相似，熟悉 jQuery 的同学可以很快的上手</li>
<li>将源码加载进 <code>cheerio</code>，分析了源码后得知所有章节信息都存于被 <code>div</code> 包裹的 <code>a</code> 标签中，通过 <code>cheerio</code> 取出符合条件的 <code>a</code> 标签组，进行遍历，获取章节的 title 和 URL，保存为对象，存进数组，(<strong>因为链接中存储的  URL 不完整，所以存储时需要补齐</strong>)</li>
<li>将对象数组序列化，写进 <code>list.json</code> 文件</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>)</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>)</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">"cheerio"</span>)</span><br><span class="line"><span class="keyword">var</span> iconv = <span class="built_in">require</span>(<span class="string">"iconv-lite"</span>)</span><br><span class="line"><span class="keyword">var</span> url = <span class="string">'http://www.17fa.com/files/article/html/90/90747/index.html'</span></span><br><span class="line">http.get(url, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;  <span class="comment">//资源请求</span></span><br><span class="line">    <span class="keyword">var</span> chunks = []</span><br><span class="line">    res.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">        chunks.push(chunk)</span><br><span class="line">    &#125;)</span><br><span class="line">    res.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> html = iconv.decode(Buffer.concat(chunks), <span class="string">'gb2312'</span>) <span class="comment">//转码操作</span></span><br><span class="line">        <span class="keyword">var</span> $ = cheerio.load(html, &#123;</span><br><span class="line">            decodeEntities: <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">var</span> content = $(<span class="string">"tbody"</span>)</span><br><span class="line">        <span class="keyword">var</span> links = []</span><br><span class="line">        $(<span class="string">'div'</span>).children(<span class="string">'a'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">i, elem</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> link = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">            link.title = $(<span class="keyword">this</span>).text()</span><br><span class="line">            link.link = <span class="string">'http://www.17fa.com/files/article/html/90/90747/'</span> + $(<span class="keyword">this</span>).attr(<span class="string">'href'</span>) <span class="comment">//补齐 URL 信息</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">5</span>) &#123;</span><br><span class="line">                links.push(link)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        fs.writeFile(<span class="string">"list.json"</span>, <span class="built_in">JSON</span>.stringify(links), <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!err) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"写文件成功"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;).on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"网页访问出错"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>获取的列表示例</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"3 法医司白"</span>,</span><br><span class="line">    <span class="attr">"link"</span>: <span class="string">"http://www.17fa.com/files/article/html/90/90747/16548771.html"</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"4 第1个梦 "</span>,</span><br><span class="line">    <span class="attr">"link"</span>: <span class="string">"http://www.17fa.com/files/article/html/90/90747/16548772.html"</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"5 刑警韩沉 "</span>,</span><br><span class="line">    <span class="attr">"link"</span>: <span class="string">"http://www.17fa.com/files/article/html/90/90747/16548773.html"</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"6 最初之战"</span>,</span><br><span class="line">    <span class="attr">"link"</span>: <span class="string">"http://www.17fa.com/files/article/html/90/90747/16548774.html "</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
<h3 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h3><p>有了 URLs 列表，接下来的工作就很机械了，遍历 URLs 列表请求资源，获取源码，解析源码，获取小说，写文件，<strong>但是</strong>，因为最终将所有的章节保存入一个文件，要保证章节的顺序，因此写文件需要 <strong>同步操作</strong>，实际上，我在编码的时候所有的操作都改成了同步方式</p>
<h4 id="获取源码"><a href="#获取源码" class="headerlink" title="获取源码"></a>获取源码</h4><p>通过解析读取的 <code>list.json</code> 文件，获取到 URLs 列表，遍历列表获取资源，因为需要确保章节的顺序，所以这里引进 <code>sync-request</code> 模块进行同步 request 请求资源，请求资源后照例转码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>)</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>)</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">"cheerio"</span>)</span><br><span class="line"><span class="keyword">var</span> iconv = <span class="built_in">require</span>(<span class="string">"iconv-lite"</span>)</span><br><span class="line"><span class="keyword">var</span> request = <span class="built_in">require</span>(<span class="string">'sync-request'</span>)</span><br><span class="line"><span class="keyword">var</span> urlList = <span class="built_in">JSON</span>.parse(fs.readFileSync(<span class="string">'list.json'</span>, <span class="string">'utf8'</span>))</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params">chapter</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = request(<span class="string">'GET'</span>,chapter.link)</span><br><span class="line">    <span class="keyword">var</span> html = iconv.decode(res.body, <span class="string">'gb2312'</span>) <span class="comment">//获取源码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; urlList.length; i++) &#123;</span><br><span class="line">    getContent(urlList[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="解析源码，获取小说"><a href="#解析源码，获取小说" class="headerlink" title="解析源码，获取小说"></a>解析源码，获取小说</h4><p>还是通过 <code>cheerio</code> 模块获取小说内容，避免影响观感，写操作之前去除内容中的的 html 标签<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params">chapter</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> res = request(<span class="string">'GET'</span>,chapter.link)</span><br><span class="line">    <span class="keyword">var</span> html = iconv.decode(res.body, <span class="string">'gb2312'</span>)</span><br><span class="line">    <span class="keyword">var</span> $ = cheerio.load(html, &#123;</span><br><span class="line">        decodeEntities: <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">var</span> content = ($(<span class="string">"div#r1c"</span>).text()).replace(<span class="regexp">/\&amp;nbsp;/g</span>, <span class="string">''</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="保存小说"><a href="#保存小说" class="headerlink" title="保存小说"></a>保存小说</h4><p>写操作也需要同步操作，因此使用了同步写函数 <code>fs.writeFileSync()</code> 和 同步添加函数 <code>fs.appendFileSync()</code>，第一次写使用写函数，之后的内容都是进行 append 操作，<strong>为了改善阅读体验，每个章节前添加标题</strong><br><strong>也可以在内容前添加 拍 [TOC]，作为导航链接</strong></p>
<p><img src="http://source.lijundong.com/public/16-11-18/1946587.jpg" style="border-radius: 0.5rem;border:0;"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">"http"</span>)</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>)</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">"cheerio"</span>)</span><br><span class="line"><span class="keyword">var</span> iconv = <span class="built_in">require</span>(<span class="string">"iconv-lite"</span>)</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">var</span> urlList = <span class="built_in">JSON</span>.parse(fs.readFileSync(<span class="string">'list.json'</span>, <span class="string">'utf8'</span>))</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getContent</span>(<span class="params">chapter</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(chapter.link)</span><br><span class="line">    http.get(chapter.link, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> chunks = []</span><br><span class="line">        res.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">            chunks.push(chunk)</span><br><span class="line">        &#125;)</span><br><span class="line">        res.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> html = iconv.decode(Buffer.concat(chunks), <span class="string">'gb2312'</span>)</span><br><span class="line">            <span class="keyword">var</span> $ = cheerio.load(html, &#123;</span><br><span class="line">                decodeEntities: <span class="literal">false</span></span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">var</span> content = ($(<span class="string">"div#r1c"</span>).text()).replace(<span class="regexp">/\&amp;nbsp;/g</span>, <span class="string">''</span>)</span><br><span class="line">            <span class="keyword">if</span> (fs.existsSync(<span class="string">'美人为馅.md'</span>)) &#123;</span><br><span class="line">                fs.appendFileSync(<span class="string">'美人为馅.md'</span>, <span class="string">'### '</span> + chapter.title)</span><br><span class="line">                fs.appendFileSync(<span class="string">'美人为馅.md'</span>, content)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                fs.writeFileSync(<span class="string">'美人为馅.md'</span>, <span class="string">'### '</span> + chapter.title)</span><br><span class="line">                fs.appendFileSync(<span class="string">'美人为馅.md'</span>, content)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;).on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"爬取"</span> + chapter.link + <span class="string">"链接出错！"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; urlList.length; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(urlList[i])</span><br><span class="line">    getContent(urlList[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Markdown-转-PDF"><a href="#Markdown-转-PDF" class="headerlink" title="Markdown 转 PDF"></a>Markdown 转 PDF</h3><p>我将小说保存在 Markdown 文件中，为了提升阅读体验，可以将 Markdown 文件转换成 PDF 文件，目前我较为喜欢的两种方式，通过 Chrome 的打印功能 以及 pandoc 转换</p>
<h4 id="Chrome-打印"><a href="#Chrome-打印" class="headerlink" title="Chrome 打印"></a>Chrome 打印</h4><p>SublimeText 有个插件 <code>markdown preview</code> ，可通过 <code>Alt + m</code> 快捷键在 Chrome 中预览 Markdown，在 Chrome 页面中右键，选择打印，调整好参数后，选择另存为 PDF，简单，粗暴，深得我心<br><strong>打印效果：</strong><br><img src="http://source.lijundong.com/public/16-11-18/97144351.jpg" alt=""></p>
<h4 id="pandoc-转换"><a href="#pandoc-转换" class="headerlink" title="pandoc 转换"></a>pandoc 转换</h4><p>pandoc 是十分强大的文件格式转换工具，可以将 Markdown 文件转换成多种格式，今晚在 windows10 下折腾了半天，始终检索不到 pdflatex，关于 pandoc，后面会专门写一篇总结。 </p>
<p>PDF 已经发给老大了，现在正在看</p>
<h3 id="关于python、node、爬虫"><a href="#关于python、node、爬虫" class="headerlink" title="关于python、node、爬虫"></a>关于python、node、爬虫</h3><p>在之前很长的一段时间里，很想用 Python，很想写爬虫，更想用 Python 写爬虫，甚至成为了心里的一块执念，随着接触的知识更全面，执念也逐渐淡去，少了很多“想”，遇事想着多去动手，实践出真知。</p>
<hr>
<p><em>talk is cheap, show me your code</em></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近因为剧荒，老大追了爱奇艺的一部网剧，由丁墨的同名小说《美人为馅》改编，目前已经放出两季，虽然整部剧槽点满满，但是老大看得不亦乐乎，并且在看完第二季之后跟我要小说资源，直接要奔原著去看结局……&lt;br&gt;随手搜了下，都是在线资源，下载的话需要登录，注册登录好麻烦，写个爬虫玩玩也好，于是动手用 node 写了一个，这里做下笔记&lt;br&gt;
    
    </summary>
    
      <category term="node" scheme="http://lijundong.com/categories/node/"/>
    
    
      <category term="node" scheme="http://lijundong.com/tags/node/"/>
    
      <category term="爬虫" scheme="http://lijundong.com/tags/%E7%88%AC%E8%99%AB/"/>
    
      <category term="小说" scheme="http://lijundong.com/tags/%E5%B0%8F%E8%AF%B4/"/>
    
  </entry>
  
  <entry>
    <title>前端开发自动化之 Gulp</title>
    <link href="http://lijundong.com/develop-automatic-gulp-set/"/>
    <id>http://lijundong.com/develop-automatic-gulp-set/</id>
    <published>2016-10-29T07:05:36.000Z</published>
    <updated>2016-10-29T09:03:48.000Z</updated>
    
    <content type="html"><![CDATA[<p>越来越意识到开发的规范化的重要性，以及自动化带来的高效，前端开发环境自动化构建的技能是必须要 get 的，于是最近用了一个 demo 完整的跑了一遍 Gulp 的前端开发自动化，体验很棒，这里记录下。<br>努力向规范看齐，向大牛看齐，多去了解，多去接触，视野开阔才能看到更远的风景，会有更多的可能。<br><a id="more"></a></p>
<h3 id="工具使用"><a href="#工具使用" class="headerlink" title="工具使用"></a>工具使用</h3><p>技术的进击的过程相似于打怪升级买装备，初级拿把小米步枪就可以制霸方圆，升级之后遇到高手才发现没几把 AK 都不好意思跟人打招呼，再升级之后，发现二营长的意大利炮还是要有的，哈哈。<br>学习前端以来都是自己一个人折腾，学的不系统，做的项目也都是小打小闹，一直没接触到自动化，第一次看介绍 Grunt 的文章时，因为应用水平太低，反复看了三遍才稍微理解开发环境自动化，但是一直没机会应用，这次做个笔记先，关于使用 grunt、gulp还是 webpack，我的观点是，你在纠结的时候，我已经开始上代码了……</p>
<h3 id="文件目录结构"><a href="#文件目录结构" class="headerlink" title="文件目录结构"></a>文件目录结构</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">|-/dist</span></span><br><span class="line"><span class="string">|-/src</span></span><br><span class="line"><span class="string">|--`css</span></span><br><span class="line"><span class="string">|--`images</span></span><br><span class="line"><span class="string">|--`js</span></span><br><span class="line"><span class="string">|--`less</span></span><br><span class="line"><span class="string">|-gulpfile.js</span></span><br><span class="line"><span class="string">|-package.json</span></span><br></pre></td></tr></table></figure>
<h3 id="Gulp"><a href="#Gulp" class="headerlink" title="Gulp"></a>Gulp</h3><p>技术选型的时候，不求最新最炫，我考虑的首要因素是合适，之所以选择 gulp，首先是上手较 grunt 简单，而且插件已经很丰富了，而且目前我应用的场景没必要使用 webpack。<br>Gulp 以及所用到的插件的安装都是通过 npm 。</p>
<h3 id="gulpfile-js-配置"><a href="#gulpfile-js-配置" class="headerlink" title="gulpfile.js 配置"></a>gulpfile.js 配置</h3><p>类似于 package.json，gulpfile.js 是gulp的配置文件，在文件中引入插件，以及自定义指令。</p>
<h4 id="gulp-插件"><a href="#gulp-插件" class="headerlink" title="gulp 插件"></a>gulp 插件</h4><p>gulp 丰富的插件可以满足目前开发环境中遇到的大部分需求，我这里列了几个插件，只是目前需要的，有新需求时再补充，如果你想找插件，直接去 <a href="http://npmjs.com/" target="_blank" rel="external">npm 官网</a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">"gulp"</span>)</span><br><span class="line"><span class="comment">// 编译 less</span></span><br><span class="line"><span class="keyword">var</span> less = <span class="built_in">require</span>(<span class="string">"gulp-less"</span>)</span><br><span class="line"><span class="comment">// 压缩 css 代码</span></span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">"gulp-clean-css"</span>)</span><br><span class="line"><span class="comment">// 压缩 js 代码</span></span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">"gulp-uglify"</span>)</span><br><span class="line"><span class="comment">// 合并文件</span></span><br><span class="line"><span class="keyword">var</span> concat = <span class="built_in">require</span>(<span class="string">"gulp-concat"</span>)</span><br><span class="line"><span class="comment">// 神器，浏览器自动刷新</span></span><br><span class="line"><span class="keyword">var</span> browserSync = <span class="built_in">require</span>(<span class="string">"browser-sync"</span>).create()</span><br><span class="line"><span class="keyword">var</span> reload = browserSync.reload;</span><br></pre></td></tr></table></figure></p>
<h4 id="配置开发环境-dev"><a href="#配置开发环境-dev" class="headerlink" title="配置开发环境  dev"></a>配置开发环境  dev</h4><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// css:dev 命令 将 /src 中的 css 移动到 /dist 并刷新页面</span></span><br><span class="line"><span class="selector-tag">gulp</span><span class="selector-class">.task</span>(<span class="string">'css:dev'</span>, function() &#123;</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">gulp</span><span class="selector-class">.src</span>(<span class="string">'src/css/*.css'</span>)</span><br><span class="line">        <span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'dist/static/css'</span>))</span><br><span class="line">        <span class="selector-class">.pipe</span>(reload(&#123;</span><br><span class="line">            <span class="attribute">stream</span>: true</span><br><span class="line">        &#125;))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// less:dev 命令 编译 less，移动到 /dist 并刷新页面</span></span><br><span class="line"><span class="selector-tag">gulp</span><span class="selector-class">.task</span>(<span class="string">'less:dev'</span>, function() &#123;</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">gulp</span><span class="selector-class">.src</span>(<span class="string">'src/less/*.less'</span>)</span><br><span class="line">        <span class="selector-class">.pipe</span>(less())</span><br><span class="line">        <span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'dist/static/css'</span>))</span><br><span class="line">        <span class="selector-class">.pipe</span>(reload(&#123;</span><br><span class="line">            <span class="attribute">stream</span>: true</span><br><span class="line">        &#125;))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// js:dev 命令 移动 js 并刷新页面</span></span><br><span class="line"><span class="selector-tag">gulp</span><span class="selector-class">.task</span>(<span class="string">'js:dev'</span>, function() &#123;</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">gulp</span><span class="selector-class">.src</span>(<span class="string">'src/js/*.js'</span>)</span><br><span class="line">        <span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'dist/static/js'</span>))</span><br><span class="line">        <span class="selector-class">.pipe</span>(reload(&#123;</span><br><span class="line">            <span class="attribute">stream</span>: true</span><br><span class="line">        &#125;))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// dev 命令，执行 js:dev less:dev css:dev 并启动 browserSync 监听 /src 下的 js、less、css代码</span></span><br><span class="line"><span class="selector-tag">gulp</span><span class="selector-class">.task</span>(<span class="string">'dev'</span>, [<span class="string">'js:dev'</span>, <span class="string">'less:dev'</span>, <span class="string">'css:dev'</span>], function() &#123;</span><br><span class="line">    <span class="selector-tag">browserSync</span><span class="selector-class">.init</span>(&#123;</span><br><span class="line">        <span class="attribute">server</span>: &#123;</span><br><span class="line">            <span class="attribute">baseDir</span>: <span class="string">'/'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attribute">notify</span>: false</span><br><span class="line">    &#125;)</span><br><span class="line">    gulp<span class="selector-class">.watch</span>(<span class="string">'src/js/*.js'</span>, [<span class="string">'js:dev'</span>])</span><br><span class="line">    <span class="selector-tag">gulp</span><span class="selector-class">.watch</span>(<span class="string">'src/less/*.less'</span>, [<span class="string">'less:dev'</span>])</span><br><span class="line">    <span class="selector-tag">gulp</span><span class="selector-class">.watch</span>(<span class="string">'src/css/*.css'</span>, [<span class="string">'css:dev'</span>])</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="打包配置"><a href="#打包配置" class="headerlink" title="打包配置"></a>打包配置</h4><p>打包上线时，可以将多个文件压缩(模板、css、css)、合并(css、js)，减少请求</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// css 压缩合并</span></span><br><span class="line"><span class="selector-tag">gulp</span><span class="selector-class">.task</span>(<span class="string">'css'</span>, function() &#123;</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">gulp</span><span class="selector-class">.src</span>(<span class="string">'src/css/*.css'</span>)</span><br><span class="line">        <span class="selector-class">.pipe</span>(autoprefixer())</span><br><span class="line">        <span class="selector-class">.pipe</span>(minifycss())</span><br><span class="line">        <span class="selector-class">.pipe</span>(concat(<span class="string">"all.min.css"</span>))</span><br><span class="line">        <span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'dist/static/css'</span>))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// less 编译、压缩</span></span><br><span class="line"><span class="selector-tag">gulp</span><span class="selector-class">.task</span>(<span class="string">'less'</span>, function() &#123;</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">gulp</span><span class="selector-class">.src</span>(<span class="string">'src/less/*.less'</span>)</span><br><span class="line">        <span class="selector-class">.pipe</span>(less())</span><br><span class="line">        <span class="selector-class">.pipe</span>(minifycss())</span><br><span class="line">        <span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'dist/static/css'</span>))</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// js 压缩 合并</span></span><br><span class="line"><span class="selector-tag">gulp</span><span class="selector-class">.task</span>(<span class="string">'js'</span>, function() &#123;</span><br><span class="line">    return gulp<span class="selector-class">.src</span>(<span class="string">'src/js/*.js'</span>)</span><br><span class="line">        <span class="selector-class">.pipe</span>(uglify())</span><br><span class="line">        <span class="selector-class">.pipe</span>(concat(<span class="string">"all.min.js"</span>))</span><br><span class="line">        <span class="selector-class">.pipe</span>(gulp.dest(<span class="string">'dist/static/js'</span>))</span><br><span class="line">        <span class="selector-class">.pipe</span>(uglify())</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 一键打包</span></span><br><span class="line"><span class="selector-tag">gulp</span><span class="selector-class">.task</span>(<span class="string">'build'</span>, [<span class="string">'css'</span>, <span class="string">'less'</span>, <span class="string">'js'</span>])</span><br></pre></td></tr></table></figure>
<h3 id="开发流程"><a href="#开发流程" class="headerlink" title="开发流程"></a>开发流程</h3><p><code>gulp dev</code> <strong>开发环境</strong>，gulp 监听 /src 下的修改，更新数据，刷新浏览器，查看预览<br>功能开发结束，<strong>打包</strong><br><code>gulp build</code> 打包，编译，压缩文件<br><strong>上线</strong></p>
<p>参考:</p>
<ul>
<li><a href="http://www.jianshu.com/p/cc1cb9a5650c" target="_blank" rel="external">入门：十分钟自动化构建</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;越来越意识到开发的规范化的重要性，以及自动化带来的高效，前端开发环境自动化构建的技能是必须要 get 的，于是最近用了一个 demo 完整的跑了一遍 Gulp 的前端开发自动化，体验很棒，这里记录下。&lt;br&gt;努力向规范看齐，向大牛看齐，多去了解，多去接触，视野开阔才能看到更远的风景，会有更多的可能。&lt;br&gt;
    
    </summary>
    
      <category term="开发工具" scheme="http://lijundong.com/categories/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="gulp" scheme="http://lijundong.com/tags/gulp/"/>
    
      <category term="前端开发" scheme="http://lijundong.com/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>解决 Google 重定向，体验 Google 本味</title>
    <link href="http://lijundong.com/google-no-country-redirect-disabled/"/>
    <id>http://lijundong.com/google-no-country-redirect-disabled/</id>
    <published>2016-10-20T13:30:19.000Z</published>
    <updated>2016-11-17T14:22:30.000Z</updated>
    
    <content type="html"><![CDATA[<p>由于不可抗力的缘故，每过一段时间，Google 就会重新被拿出来说一次，上一次说的是入门之法，关于 VPN 和 Shadowsocks 的一些很基础的东西。<br>最近小飞机换了更快的香港的服务器，体验非常棒，但是在使用 Google 时，Google 为了提供更好的本地搜索体验，<code>google.com</code> 会自动重定向到 <code>google.com.hk</code> ，可惜这些体验只有身在香港的服务器才能体验，而身在天朝的我还需要去考虑 <code>google country redirect disable</code>。<br><a id="more"></a><br>想要体验原汁原味的 Google(google.com)，下面的方案是我用过的较方便的方案。<br><strong>欢迎更正及补充</strong></p>
<h3 id="Chrome-扩展"><a href="#Chrome-扩展" class="headerlink" title="Chrome 扩展"></a>Chrome 扩展</h3><p>Chrone 商店有一款禁止重定向的扩展 <a href="https://chrome.google.com/webstore/detail/nocountryredirect-ncr/ciboebddidackjicoeoiigdnbmchkdll?hl=en" target="_blank" rel="external">NoCountryRedirect (NCR)</a><br>这款插件是将重定向后的 <code>google.com.hk</code> 再重定向到 <code>google.com</code>，虽然有效，但是多次重定向导致页面相应变慢，体验不太好，装完体验两分钟就卸了<br>优点：安装方便<br>缺点：导致 Google 访问速度变得很慢</p>
<h3 id="手动-google-com-ncr"><a href="#手动-google-com-ncr" class="headerlink" title="手动 google.com/ncr"></a>手动 google.com/ncr</h3><p>可以通过手动 ncr(no country redirect) 来强制禁止重定向，我将这个 url 设置了书签。</p>
<h3 id="设置默认搜索引擎"><a href="#设置默认搜索引擎" class="headerlink" title="设置默认搜索引擎"></a>设置默认搜索引擎</h3><p>Chrome –&gt; 设置 -&gt; 搜索 -&gt; 管理搜索引擎 –&gt; 其他搜索引擎<br>拉到最下，有一个“添加新的搜索引擎”，参数如下</p>
<blockquote>
<p>名字：google.com<br>关键字: Google-ncr<br>url: <a href="http://www.google.com/search?q=%s" target="_blank" rel="external">http://www.google.com/search?q=%s</a></p>
</blockquote>
<p>配置完设置为默认搜索引擎，完成</p>
<p><em>人生苦短，我用 Google</em></p>
<hr>
<p>新的 MBP 一周后发布，等了大半年，终于等来了，下面的事情就是存钱了，Fighting！</p>
<p><em>人生苦短，我用 Mac</em></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;由于不可抗力的缘故，每过一段时间，Google 就会重新被拿出来说一次，上一次说的是入门之法，关于 VPN 和 Shadowsocks 的一些很基础的东西。&lt;br&gt;最近小飞机换了更快的香港的服务器，体验非常棒，但是在使用 Google 时，Google 为了提供更好的本地搜索体验，&lt;code&gt;google.com&lt;/code&gt; 会自动重定向到 &lt;code&gt;google.com.hk&lt;/code&gt; ，可惜这些体验只有身在香港的服务器才能体验，而身在天朝的我还需要去考虑 &lt;code&gt;google country redirect disable&lt;/code&gt;。&lt;br&gt;
    
    </summary>
    
      <category term="工具使用" scheme="http://lijundong.com/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="google" scheme="http://lijundong.com/tags/google/"/>
    
  </entry>
  
</feed>
